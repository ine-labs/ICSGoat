/*! Snap.js v2.0.0-rc1 */
(function(a,b){"use strict";var c="Snap",d={extend:function(a,b){var c;for(c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=a[c]||{},d.extend(a[c],b[c])):a[c]=b[c];return a}},e=function(c){var e=this,f=e.settings={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,clickToDrag:!0,slideIntent:40,minDragDistance:5},g=e.cache={isDragging:!1,simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},h=e.eventList={};d.extend(d,{hasTouch:"ontouchstart"in b.documentElement||a.navigator.msPointerEnabled,eventType:function(a){var b={down:d.hasTouch?"touchstart":f.clickToDrag?"mousedown":"",move:d.hasTouch?"touchmove":f.clickToDrag?"mousemove":"",up:d.hasTouch?"touchend":f.clickToDrag?"mouseup":"",out:d.hasTouch?"touchcancel":f.clickToDrag?"mouseout":""};return b[a]},page:function(a,b){return d.hasTouch&&b.touches.length&&b.touches[0]?b.touches[0]["page"+a]:b["page"+a]},klass:{has:function(a,b){return-1!==a.className.indexOf(b)},add:function(a,b){!d.klass.has(a,b)&&f.addBodyClasses&&(a.className+=" "+b)},remove:function(a,b){d.klass.has(a,b)&&f.addBodyClasses&&(a.className=a.className.replace(b,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(a){return"function"==typeof h[a]?h[a].apply():void 0},vendor:function(){var a,c=b.createElement("div"),d="webkit Moz O ms".split(" ");for(a in d)if("undefined"!=typeof c.style[d[a]+"Transition"])return d[a]},transitionCallback:function(){return"Moz"===g.vendor||"ms"===g.vendor?"transitionend":g.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!=typeof f.element.style[g.vendor+"Transform"]},angleOfDrag:function(a,b){var c,d;return d=Math.atan2(-(g.startDragY-b),g.startDragX-a),0>d&&(d+=2*Math.PI),c=Math.floor(d*(180/Math.PI)-180),0>c&&c>-180&&(c=360-Math.abs(c)),Math.abs(c)},events:{addEvent:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0},removeEvent:function(a,b,c){return a.addEventListener?a.removeEventListener(b,c,!1):a.attachEvent?a.detachEvent("on"+b,c):void 0},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}},parentUntil:function(a,b){for(var c="string"==typeof b;a.parentNode;){if(c&&a.getAttribute&&a.getAttribute(b))return a;if(!c&&a===b)return a;a=a.parentNode}return null}});var i=e.action={translate:{get:{matrix:function(b){if(g.canTransform){var c=a.getComputedStyle(f.element)[g.vendor+"Transform"].match(/\((.*)\)/),d=8;return c?(c=c[1].split(","),16===c.length&&(b+=d),parseInt(c[b],10)):0}return parseInt(f.element.style.left,10)}},easeCallback:function(){f.element.style[g.vendor+"Transition"]="",g.translation=i.translate.get.matrix(4),g.easing=!1,0===g.easingTo&&(d.klass.remove(b.body,"snapjs-right"),d.klass.remove(b.body,"snapjs-left")),g.once&&(g.once.call(e,e.state()),delete g.once),d.dispatchEvent("animated"),d.events.removeEvent(f.element,d.transitionCallback(),i.translate.easeCallback)},easeTo:function(a,b){g.canTransform?(g.easing=!0,g.easingTo=a,f.element.style[g.vendor+"Transition"]="all "+f.transitionSpeed+"s "+f.easing,g.once=b,d.events.addEvent(f.element,d.transitionCallback(),i.translate.easeCallback),i.translate.x(a)):(g.translation=a,i.translate.x(a)),0===a&&(f.element.style[g.vendor+"Transform"]="")},x:function(c){if(!("left"===f.disable&&c>0||"right"===f.disable&&0>c))if(f.hyperextensible||(c===f.maxPosition||c>f.maxPosition?c=f.maxPosition:(c===f.minPosition||c<f.minPosition)&&(c=f.minPosition)),c=parseInt(c,10),isNaN(c)&&(c=0),g.canTransform){var d="translate3d("+c+"px, 0,0)";f.element.style[g.vendor+"Transform"]=d}else f.element.style.width=(a.innerWidth||b.documentElement.clientWidth)+"px",f.element.style.left=c+"px",f.element.style.right=""}},drag:{listen:function(){g.translation=0,g.easing=!1,d.events.addEvent(e.settings.element,d.eventType("down"),i.drag.startDrag),d.events.addEvent(e.settings.element,d.eventType("move"),i.drag.dragging),d.events.addEvent(e.settings.element,d.eventType("up"),i.drag.endDrag)},stopListening:function(){d.events.removeEvent(f.element,d.eventType("down"),i.drag.startDrag),d.events.removeEvent(f.element,d.eventType("move"),i.drag.dragging),d.events.removeEvent(f.element,d.eventType("up"),i.drag.endDrag)},startDrag:function(a){var b=a.target?a.target:a.srcElement,c=d.parentUntil(b,"data-snap-ignore");if(c)return void d.dispatchEvent("ignore");if(f.dragger){var e=d.parentUntil(b,f.dragger);if(!e&&g.translation!==f.minPosition&&g.translation!==f.maxPosition)return}d.dispatchEvent("start"),f.element.style[g.vendor+"Transition"]="",g.isDragging=!0,g.intentChecked=!1,g.startDragX=d.page("X",a),g.startDragY=d.page("Y",a),g.dragWatchers={current:0,last:0,hold:0,state:""},g.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(a){if(g.isDragging&&f.touchToDrag){var c,e=d.page("X",a),h=d.page("Y",a),j=g.translation,k=i.translate.get.matrix(4),l=e-g.startDragX,m=k>0,n=l;if(g.intentChecked&&!g.hasIntent)return;if(f.addBodyClasses&&(k>0?(d.klass.add(b.body,"snapjs-left"),d.klass.remove(b.body,"snapjs-right")):0>k&&(d.klass.add(b.body,"snapjs-right"),d.klass.remove(b.body,"snapjs-left"))),g.hasIntent===!1||null===g.hasIntent){var o=d.angleOfDrag(e,h),p=o>=0&&o<=f.slideIntent||360>=o&&o>360-f.slideIntent,q=o>=180&&o<=180+f.slideIntent||180>=o&&o>=180-f.slideIntent;g.hasIntent=q||p?!0:!1,g.intentChecked=!0}if(f.minDragDistance>=Math.abs(e-g.startDragX)||g.hasIntent===!1)return;d.events.prevent(a),d.dispatchEvent("drag"),g.dragWatchers.current=e,g.dragWatchers.last>e?("left"!==g.dragWatchers.state&&(g.dragWatchers.state="left",g.dragWatchers.hold=e),g.dragWatchers.last=e):g.dragWatchers.last<e&&("right"!==g.dragWatchers.state&&(g.dragWatchers.state="right",g.dragWatchers.hold=e),g.dragWatchers.last=e),m?(f.maxPosition<k&&(c=(k-f.maxPosition)*f.resistance,n=l-c),g.simpleStates={opening:"left",towards:g.dragWatchers.state,hyperExtending:f.maxPosition<k,halfway:k>f.maxPosition/2,flick:Math.abs(g.dragWatchers.current-g.dragWatchers.hold)>f.flickThreshold,translation:{absolute:k,relative:l,sinceDirectionChange:g.dragWatchers.current-g.dragWatchers.hold,percentage:k/f.maxPosition*100}}):(f.minPosition>k&&(c=(k-f.minPosition)*f.resistance,n=l-c),g.simpleStates={opening:"right",towards:g.dragWatchers.state,hyperExtending:f.minPosition>k,halfway:k<f.minPosition/2,flick:Math.abs(g.dragWatchers.current-g.dragWatchers.hold)>f.flickThreshold,translation:{absolute:k,relative:l,sinceDirectionChange:g.dragWatchers.current-g.dragWatchers.hold,percentage:k/f.minPosition*100}}),i.translate.x(n+j)}},endDrag:function(a){if(g.isDragging){d.dispatchEvent("end");var b=i.translate.get.matrix(4);if(0===g.dragWatchers.current&&0!==b&&f.tapToClose)return d.dispatchEvent("close"),d.events.prevent(a),i.translate.easeTo(0),g.isDragging=!1,void(g.startDragX=0);"left"===g.simpleStates.opening?g.simpleStates.halfway||g.simpleStates.hyperExtending||g.simpleStates.flick?g.simpleStates.flick&&"left"===g.simpleStates.towards?i.translate.easeTo(0):(g.simpleStates.flick&&"right"===g.simpleStates.towards||g.simpleStates.halfway||g.simpleStates.hyperExtending)&&i.translate.easeTo(f.maxPosition):i.translate.easeTo(0):"right"===g.simpleStates.opening&&(g.simpleStates.halfway||g.simpleStates.hyperExtending||g.simpleStates.flick?g.simpleStates.flick&&"right"===g.simpleStates.towards?i.translate.easeTo(0):(g.simpleStates.flick&&"left"===g.simpleStates.towards||g.simpleStates.halfway||g.simpleStates.hyperExtending)&&i.translate.easeTo(f.minPosition):i.translate.easeTo(0)),g.isDragging=!1,g.startDragX=d.page("X",a)}}}};c.element&&(d.extend(f,c),g.vendor=d.vendor(),g.canTransform=d.canTransform(),i.drag.listen())};d.extend(e.prototype,{open:function(a,c){d.dispatchEvent("open"),d.klass.remove(b.body,"snapjs-expand-left"),d.klass.remove(b.body,"snapjs-expand-right"),"left"===a?(this.cache.simpleStates.opening="left",this.cache.simpleStates.towards="right",d.klass.add(b.body,"snapjs-left"),d.klass.remove(b.body,"snapjs-right"),this.action.translate.easeTo(this.settings.maxPosition,c)):"right"===a&&(this.cache.simpleStates.opening="right",this.cache.simpleStates.towards="left",d.klass.remove(b.body,"snapjs-left"),d.klass.add(b.body,"snapjs-right"),this.action.translate.easeTo(this.settings.minPosition,c))},close:function(a){d.dispatchEvent("close"),this.action.translate.easeTo(0,a)},expand:function(c){var e=a.innerWidth||b.documentElement.clientWidth;"left"===c?(d.dispatchEvent("expandLeft"),d.klass.add(b.body,"snapjs-expand-left"),d.klass.remove(b.body,"snapjs-expand-right")):(d.dispatchEvent("expandRight"),d.klass.add(b.body,"snapjs-expand-right"),d.klass.remove(b.body,"snapjs-expand-left"),e*=-1),this.action.translate.easeTo(e)},on:function(a,b){return this.eventList[a]=b,this},off:function(a){this.eventList[a]&&(this.eventList[a]=!1)},enable:function(){d.dispatchEvent("enable"),this.action.drag.listen()},disable:function(){d.dispatchEvent("disable"),this.action.drag.stopListening()},settings:function(a){d.extend(this.settings,a)},state:function(){var a,b=this.action.translate.get.matrix(4);return a=b===this.settings.maxPosition?"left":b===this.settings.minPosition?"right":"closed",{state:a,info:this.cache.simpleStates}}}),this[c]=e}).call(this,window,document);