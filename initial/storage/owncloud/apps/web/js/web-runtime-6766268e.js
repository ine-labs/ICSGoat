define(["exports","./chunks/vendor-569e5121","./chunks/error-992e7064","./chunks/cache-40bfe919","./chunks/useRoute-1812bd9a"],(function(e,t,i,a,n){"use strict";const o={props:{target:{type:String,required:!0}},computed:{targetElement(){return document.getElementById(this.target)}},methods:{skipToTarget(){this.targetElement.setAttribute("tabindex","-1"),this.targetElement.focus(),this.targetElement.scrollIntoView()}}};var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"skip-button",on:{click:e.skipToTarget}},[e._t("default")],2)};r._withStripped=!0;const s=t.normalizeComponent({render:r,staticRenderFns:[]},undefined,o,"data-v-506cd62a",false,undefined,!1,void 0,void 0,void 0);var c={computed:{...t.mapGetters(["getNavItemsByExtension"])},methods:{navigation_getMenuItems(e,t){return this.applicationsList.filter((t=>"extension"===t.type?this.getNavItemsByExtension(t.id).filter((t=>l(e,t))).length>0:l(e,t))).map((e=>{const i=this.$language.current;let a,n,o=e.title?e.title.en:e.name;e.title&&e.title[i]&&(o=e.title[i]),e.icon?e.icon.indexOf(".")<0?a=e.icon:n=e.icon:a="deprecated";const r={icon:a,iconUrl:n,title:o};return e.url?(r.url=e.url,r.target=["_blank","_self","_parent","_top"].includes(e.target)?e.target:"_blank"):e.path?(r.path=e.path,r.active=t?.startsWith(r.path)):(r.path=`/${e.id}`,r.active=t?.startsWith(r.path)),r}))}}};function l(e,t){return t.menu?e.includes(t.menu):e.includes(null)}const u={props:{applicationsList:{type:Array,required:!1,default:()=>[]}},computed:{applicationSwitcherLabel(){return this.$gettext("Application Switcher")}},mounted(){this.$refs.menu?.tippy?.setProps({onHidden:()=>this.$refs.menubutton.$el.focus(),onShown:()=>this.$refs.menu.$el.querySelector("a:first-of-type").focus()})}};var d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"oc-flex oc-flex-middle",attrs:{id:"applications-menu","aria-label":e.$gettext("Main navigation")}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.applicationSwitcherLabel,expression:"applicationSwitcherLabel"}],ref:"menubutton",staticClass:"oc-topbar-menu-burger",attrs:{id:"_appSwitcherButton",appearance:"raw",variation:"inverse","aria-label":e.applicationSwitcherLabel}},[i("oc-icon",{staticClass:"oc-flex",attrs:{name:"grid",size:"large"}})],1),e._v(" "),i("oc-drop",{ref:"menu",attrs:{"drop-id":"app-switcher-dropdown",toggle:"#_appSwitcherButton",mode:"click","padding-size":"small","close-on-click":""}},[i("oc-list",{staticClass:"applications-list"},e._l(e.applicationsList,(function(t,a){return i("li",{key:"apps-menu-"+a},[i("oc-button",{key:t.url?"apps-menu-external-link":"apps-menu-internal-link",class:{"oc-background-primary-gradient":t.active},attrs:{type:t.url?"a":"router-link",target:t.target,href:t.url,to:t.path,appearance:"raw",variation:t.active?"inverse":"passive"}},[i("span",{staticClass:"icon-box",class:{"icon-box-active":t.active}},[i("oc-icon",{attrs:{name:t.icon}})],1),e._v(" "),i("span",{domProps:{textContent:e._s(e.$gettext(t.title))}}),e._v(" "),t.active?i("oc-icon",{staticClass:"active-check",attrs:{name:"check"}}):e._e()],1)],1)})),0)],1)],1)};d._withStripped=!0;const p=t.normalizeComponent({render:d,staticRenderFns:[]},undefined,u,"data-v-1e86f1f0",false,undefined,!1,void 0,void 0,void 0);const m={props:{applicationsList:{type:Array,required:!1,default:()=>[]}},computed:{...t.mapGetters(["quota","user"]),userId(){return this.user.username||this.user.id},personalStorageLabel(){return this.$gettextInterpolate(this.$gettext("Personal storage (%{percentage}% used)"),{percentage:this.quotaUsagePercent})},personalStorageDetailsLabel(){return this.$gettextInterpolate(this.$gettext("%{used} of %{total} used"),{used:this.quotaUsed,total:this.quotaTotal})},quotaEnabled(){return!!this.quota},quotaTotal(){return t.filesize_min(this.quota.total)},quotaUsed(){return t.filesize_min(this.quota.used)},quotaUsagePercent(){return(this.quota.used/this.quota.total*100).toFixed(1)},quotaProgressVariant(){return this.quotaUsagePercent<80?"primary":this.quotaUsagePercent<90?"warning":"danger"}},mounted(){this.$refs.menu?.tippy?.setProps({onHidden:()=>this.$refs.menuButton.$el.focus(),onShown:()=>this.$refs.menu.$el.querySelector("a:first-of-type").focus()})},methods:{logout(){setTimeout((()=>{this.$store.dispatch("logout")}))}}};var h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.userId?i("nav",{attrs:{"aria-label":e.$gettext("Account menu")}},[i("oc-button",{ref:"menuButton",staticClass:"oc-topbar-personal",attrs:{id:"_userMenuButton",appearance:"raw","aria-label":e.$gettext("User Menu")}},[i("avatar-image",{staticClass:"oc-topbar-personal-avatar oc-flex-inline oc-flex-center oc-flex-middle",attrs:{width:32,userid:e.userId,"user-name":e.user.displayname}})],1),e._v(" "),i("oc-drop",{ref:"menu",attrs:{"drop-id":"account-info-container",toggle:"#_userMenuButton",mode:"click","close-on-click":"","padding-size":"small"}},[i("oc-list",{staticClass:"user-menu-list"},[i("li",[i("oc-button",{attrs:{id:"oc-topbar-account-manage",type:"router-link",to:{path:"/account"},appearance:"raw"}},[i("avatar-image",{attrs:{width:32,userid:e.userId,"user-name":e.user.displayname}}),e._v(" "),i("span",{staticClass:"profile-info-wrapper",class:{"oc-py-xs":!e.user.email}},[i("span",{domProps:{textContent:e._s(e.user.displayname)}}),e._v(" "),e.user.email?i("br"):e._e(),e._v(" "),e.user.email?i("span",{staticClass:"oc-text-small",domProps:{textContent:e._s(e.user.email)}}):e._e()])],1)],1),e._v(" "),e._l(e.applicationsList,(function(t,a){return i("li",{key:"user-menu-"+a},[t.url?i("oc-button",{attrs:{type:"a",appearance:"raw",target:t.target,href:t.url}},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:t.icon}}),e._v(" "),i("translate",[e._v(e._s(t.title))])],1):i("oc-button",{attrs:{type:"router-link",appearance:"raw",to:{path:t.path}}},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:t.icon}}),e._v(" "),i("translate",[e._v(e._s(t.title))])],1)],1)})),e._v(" "),i("li",[i("oc-button",{attrs:{id:"oc-topbar-account-logout",appearance:"raw"},on:{click:e.logout}},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:"logout-box-r","fill-type":"line"}}),e._v(" "),i("translate",[e._v("Log out")])],1)],1),e._v(" "),e.quotaEnabled?i("li",{staticClass:"storage-wrapper oc-pl-s"},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:"cloud","fill-type":"line"}}),e._v(" "),i("div",{staticClass:"storage-wrapper-text"},[i("p",{staticClass:"oc-my-rm"},[i("span",{domProps:{textContent:e._s(e.personalStorageLabel)}}),e._v(" "),i("br"),e._v(" "),i("span",{staticClass:"oc-text-small",domProps:{textContent:e._s(e.personalStorageDetailsLabel)}})]),e._v(" "),i("oc-progress",{attrs:{value:parseInt(e.quotaUsagePercent),max:100,size:"small",variation:e.quotaProgressVariant}})],1)],1):e._e()],2)],1)],1):e._e()};h._withStripped=!0;const g=t.normalizeComponent({render:h,staticRenderFns:[]},undefined,m,"data-v-f2cbaebe",false,undefined,!1,void 0,void 0,void 0);const f={computed:{...t.mapGetters(["activeNotifications","configuration"]),notificationsLabel(){return this.$gettext("Notifications")}},methods:{...t.mapActions(["deleteNotification","showMessage"]),...t.mapActions("Files",["loadFolder"]),executeRequest(e,t,i,a){this.$client.requests.ocs({service:"apps/"+e,action:t.substr(t.lastIndexOf("api")),method:i}).then((e=>{this.deleteNotification({client:this.$client,notification:a}),e.json().then((e=>{e.ocs.data.forEach((e=>{const t=e.path.substr(0,e.path.lastIndexOf("/")+1);t===(this.$route.params.item?this.$route.params.item:"/")&&this.reloadFilesList(t)}))}))}))},reloadFilesList(e){this.loadFolder({client:this.$client,absolutePath:e,$gettext:this.$gettext,routeName:this.$route.name}).catch((e=>{this.showMessage({title:this.$gettext("Loading folder failed…"),desc:e.message,status:"danger"})}))}}};var v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-flex oc-flex-middle",attrs:{id:"oc-notification"}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.notificationsLabel,expression:"notificationsLabel"}],attrs:{id:"oc-notification-bell",appearance:"raw",variation:"inverse","aria-label":e.notificationsLabel}},[i("oc-icon",{staticClass:"oc-cursor-pointer oc-flex oc-flex-middle",attrs:{name:"notification-3","fill-type":"line"}})],1),e._v(" "),i("oc-drop",{staticClass:"oc-overflow-auto oc-width-3-4 oc-width-large@s",attrs:{id:"oc-notification-drop","drop-id":"notifications-dropdown",toggle:"#oc-notification-bell",mode:"click",options:{pos:"bottom-right",delayHide:0},"padding-size":"small"}},e._l(e.activeNotifications,(function(t,a){return i("div",{key:a,staticClass:"oc-width-1-1"},[i("h4",{domProps:{textContent:e._s(t.subject)}}),e._v(" "),t.message?i("p",{staticClass:"oc-text-small"},[e._v(e._s(t.message))]):e._e(),e._v(" "),i("p",[t.link?i("a",{attrs:{href:t.link,target:"_blank"}},[e._v(e._s(t.link))]):e._e()]),e._v(" "),i("div",{staticClass:"oc-width-1-1 oc-flex-right"},[0!==t.actions.length?e._l(t.actions,(function(n,o){return i("oc-button",{key:a+"-"+o,staticClass:"oc-ml-s",attrs:{size:"small",variation:n.primary?"primary":"passive",appearance:"filled"},on:{click:function(i){return i.preventDefault(),e.executeRequest(t.app,n.link,n.type,t.notification_id)}}},[e._v(e._s(n.label))])})):i("oc-button",{attrs:{id:"resolve-notification-button",size:"small"},on:{"~click":function(i){return i.preventDefault(),e.deleteNotification({client:e.$client,notification:t.notification_id})}}},[e._v("\n          Mark as read\n        ")])],2),e._v(" "),a+1!==e.activeNotifications.length?i("hr"):e._e()])})),0)],1)};v._withStripped=!0;const b=t.normalizeComponent({render:v,staticRenderFns:[]},undefined,f,"data-v-efccb1ec",false,undefined,!1,void 0,void 0,void 0);const w={name:"FeedbackLink",props:{href:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null}},computed:{hrefOrFallback(){return this.href||"https://owncloud.com/web-design-feedback"},ariaLabelOrFallback(){return this.ariaLabel||this.$gettext("ownCloud feedback survey")},descriptionOrFallback(){return this.description||this.$gettext("Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.")}}};var _=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-flex"},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.descriptionOrFallback,expression:"descriptionOrFallback"}],attrs:{type:"a",href:e.hrefOrFallback,target:"_blank",appearance:"raw",variation:"inverse","aria-label":e.ariaLabelOrFallback,"aria-describedby":"oc-feedback-link-description"}},[i("oc-icon",{attrs:{name:"feedback"}})],1),e._v(" "),i("p",{staticClass:"oc-invisible-sr",attrs:{id:"oc-feedback-link-description"},domProps:{textContent:e._s(e.descriptionOrFallback)}})],1)};_._withStripped=!0;const k=t.normalizeComponent({render:_,staticRenderFns:[]},undefined,w,undefined,false,undefined,!1,void 0,void 0,void 0),y="default",E="default-dark",S=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?E:y;const C={setup(){const e=a.useStore(),n=i.useLocalStorage("oc_currentThemeName",S()),o=t.computed((()=>e.getters.configuration.themes[t.unref(n)]));return t.watch(n,(async()=>{await e.dispatch("loadTheme",{theme:t.unref(o)}),(e=>{for(const t in e.designTokens.colorPalette)document.querySelector(":root").style.setProperty(`--oc-color-${t}`,e.designTokens.colorPalette[t])})(t.unref(o))})),{currentThemeName:n,currentTheme:o}},computed:{...t.mapGetters(["configuration"]),isLightTheme(){return[null,y].includes(this.currentThemeName)},buttonLabel(){return this.$gettext("Click to switch theme")},switchIcon(){return this.isLightTheme?"sun":"moon-clear"},switchLabel(){return this.$gettext("Currently used theme")},switchText(){return this.isLightTheme?this.$gettext("Light mode"):this.$gettext("Dark mode")}},methods:{toggleTheme(){this.currentThemeName=this.isLightTheme?E:y}}};var x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.buttonLabel,expression:"buttonLabel"}],staticClass:"themeswitcher-btn",attrs:{"aria-label":e.buttonLabel,appearance:"raw",variation:"inverse"},on:{click:e.toggleTheme}},[i("span",{staticClass:"oc-visible@s",attrs:{"aria-label":e.switchLabel},domProps:{textContent:e._s(e.switchText)}}),e._v(" "),i("oc-icon",{attrs:{name:e.switchIcon,"fill-type":"line"}})],1)};x._withStripped=!0;const I={components:{ApplicationsMenu:p,FeedbackLink:k,Notifications:b,ThemeSwitcher:t.normalizeComponent({render:x,staticRenderFns:[]},undefined,C,undefined,false,undefined,!1,void 0,void 0,void 0),UserMenu:g},mixins:[c],props:{applicationsList:{type:Array,required:!1,default:()=>[]},activeNotifications:{type:[Array,Boolean],required:!1,default:()=>[]}},computed:{...t.mapGetters(["configuration","user"]),activeRoutePath(){return this.$router.resolve(this.$route).location.path},appMenuItems(){return this.navigation_getMenuItems([null,"apps","appSwitcher"],this.activeRoutePath)},userMenuItems(){return this.navigation_getMenuItems(["user"],this.activeRoutePath)},darkThemeAvailable(){return this.configuration.themes.default&&this.configuration.themes["default-dark"]},sidebarLogoAlt(){return this.$gettext("Navigate to personal files page")},logoImage(){return this.configuration.currentTheme.logo.topbar},isFeedbackLinkEnabled(){return!this.configuration.options.disableFeedbackLink},feedbackLinkOptions(){const e=this.configuration.options.feedbackLink;return this.isFeedbackLinkEnabled&&e?{...e.href&&{href:e.href},...e.ariaLabel&&{ariaLabel:e.ariaLabel},...e.description&&{description:e.description}}:{}},isNotificationBellEnabled(){return this.user?.id&&this.activeNotifications.length},isUserMenuEnabled(){return this.user?.id}}};var A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"oc-flex oc-flex-middle oc-flex-between oc-px-m",attrs:{id:"oc-topbar","aria-label":e.$gettext("Top bar")}},[i("div",{staticClass:"oc-topbar-left oc-flex oc-flex-middle oc-flex-between"},[e.appMenuItems.length?i("applications-menu",{attrs:{"applications-list":e.appMenuItems}}):e._e(),e._v(" "),i("router-link",{ref:"navigationSidebarLogo",attrs:{to:"/"}},[i("oc-img",{staticClass:"oc-logo-image",attrs:{src:e.logoImage,alt:e.sidebarLogoAlt}})],1)],1),e._v(" "),i("div",{staticClass:"portal-wrapper"},[i("portal-target",{attrs:{name:"app.runtime.header",multiple:""}})],1),e._v(" "),i("div",{staticClass:"oc-topbar-right oc-flex oc-flex-middle oc-flex-between"},[e.darkThemeAvailable?i("theme-switcher"):e._e(),e._v(" "),e.isFeedbackLinkEnabled?i("feedback-link",e._b({},"feedback-link",e.feedbackLinkOptions,!1)):e._e(),e._v(" "),e.isNotificationBellEnabled?i("notifications"):e._e(),e._v(" "),e.isUserMenuEnabled?i("user-menu",{attrs:{"applications-list":e.userMenuItems}}):e._e()],1)])};A._withStripped=!0;const T=t.normalizeComponent({render:A,staticRenderFns:[]},undefined,I,undefined,false,undefined,!1,void 0,void 0,void 0);const N={props:{activeMessages:{type:Array,required:!1,default:()=>[]}},computed:{$_ocMessages_limited(){return this.activeMessages?this.activeMessages.slice(0,5):[]}},methods:{deleteMessage(e){this.$emit("deleteMessage",e)}}};var L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-notifications",e._l(e.$_ocMessages_limited,(function(t){return i("oc-notification-message",{key:t.id,staticClass:"oc-width-large",attrs:{title:e.$gettext(t.title),message:e.$gettext(t.desc),status:t.status},on:{close:function(i){return e.deleteMessage(t)}}})})),1)};L._withStripped=!0;const P=t.normalizeComponent({render:L,staticRenderFns:[]},undefined,N,undefined,false,undefined,!1,void 0,void 0,void 0);const $={props:{index:{type:Number,required:!0},active:{type:Boolean,required:!0}},data:()=>({initial:!1}),watch:{active(e){e&&this.animateHighlightPosition(this.index)}},created(){this.active&&(this.initial=!0)},methods:{animateHighlightPosition(e,t=.2){const i=this.getInitialId(),a=this.getNavigationItem(i),n=this.getNavigationItem(e),o=this.getDistanceBetweenElements(a,n),r=e<i?-o:o,s=this.getHighlightingElement().style;s.setProperty("transition-duration",`${t}s`),s.setProperty("transform",`translateY(${r}px)`)},getNavigationItem:e=>document.querySelectorAll(`[data-nav-id="${e}"]`)[0],getPositionAtCenter(e){const{top:t,left:i,width:a,height:n}=e.getBoundingClientRect();return{x:i+a/2,y:t+n/2}},getDistanceBetweenElements(e,t){const i=this.getPositionAtCenter(e),a=this.getPositionAtCenter(t);return Math.hypot(i.x-a.x,i.y-a.y)},getHighlightingElement:()=>document.getElementById("highlighter"),getInitialId(){return this.getHighlightingElement().getAttribute("data-initial-id")}}};var R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.initial?i("span",{staticClass:"oc-background-primary-gradient",attrs:{id:"highlighter","data-initial-id":e.index}}):e._e()};R._withStripped=!0;const F={components:{SidebarNavItemHighlight:t.normalizeComponent({render:R,staticRenderFns:[]},undefined,$,undefined,false,undefined,!1,void 0,void 0,void 0)},props:{name:{type:String,required:!0},index:{type:Number,required:!0},active:{type:Boolean,required:!1,default:!1},target:{type:String,required:!1,default:null},icon:{type:String,required:!0},fillType:{type:String,required:!1,default:"fill"},collapsed:{type:Boolean,required:!1,default:!1},tag:{type:String,required:!1,default:null}},computed:{navName(){return t.get(this.$router?.resolve(this.target),"route.name")},toolTip(){return{content:this.collapsed?this.$gettextInterpolate(this.$gettext("Navigate to %{ pageName } page"),{pageName:this.name}):"",placement:"right",arrow:!1}}}};var D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"oc-sidebar-nav-item oc-pb-xs oc-px-s",attrs:{"aria-current":e.active?"page":null}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.toolTip,expression:"toolTip"}],class:["oc-sidebar-nav-item-link",{active:e.active}],attrs:{type:"router-link",appearance:"raw",variation:e.active?"inverse":"passive",to:e.target,"data-nav-id":e.index,"data-nav-name":e.navName}},[i("span",{staticClass:"oc-flex"},[i("oc-icon",{attrs:{name:e.icon,"fill-type":e.fillType}}),e._v(" "),i("span",{staticClass:"oc-ml-m text",class:{"text-invisible":e.collapsed},domProps:{textContent:e._s(e.name)}})],1),e._v(" "),e.tag?i("oc-tag",{staticClass:"oc-py-rm",attrs:{size:"small"}},[e._v(e._s(e.tag))]):e._e(),e._v(" "),i("sidebar-nav-item-highlight",{attrs:{index:e.index,active:e.active}})],1)],1)};D._withStripped=!0;const O={components:{SidebarNavItem:t.normalizeComponent({render:D,staticRenderFns:[]},undefined,F,undefined,false,undefined,!1,void 0,void 0,void 0)},props:{navItems:{type:Array,required:!0}},computed:{...t.mapState(["navigation"]),toggleSidebarButtonClass(){return this.navigation.closed?"toggle-sidebar-button-collapsed":"toggle-sidebar-button-expanded oc-pr-s"},toggleSidebarButtonIcon(){return this.navigation.closed?"arrow-drop-right":"arrow-drop-left"}},methods:{...t.mapActions(["openNavigation","closeNavigation"]),toggleSidebarButtonClick(){return this.navigation.closed?this.openNavigation():this.closeNavigation()}}};var M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"oc-app-navigation-collapsed":e.navigation.closed,"oc-app-navigation-expanded":!e.navigation.closed},attrs:{id:"web-nav-sidebar"}},[i("oc-button",{staticClass:"toggle-sidebar-button oc-py-s",class:e.toggleSidebarButtonClass,attrs:{appearance:"raw","aria-label":e.$gettext("Toggle sidebar")},on:{click:e.toggleSidebarButtonClick}},[i("oc-icon",{attrs:{size:"large","fill-type":"line",name:e.toggleSidebarButtonIcon}})],1),e._v(" "),i("nav",{staticClass:"oc-sidebar-nav oc-my-m oc-px-xs",attrs:{"aria-label":e.$gettext("Sidebar navigation menu")}},[i("oc-list",e._l(e.navItems,(function(t,a){return i("sidebar-nav-item",{key:t.route.path,attrs:{index:a,target:t.route.path,active:t.active,icon:t.icon,"fill-type":t.fillType,name:t.name,collapsed:e.navigation.closed,tag:t.tag}})})),1)],1),e._v(" "),e._t("bottom")],2)};M._withStripped=!0;const U=t.normalizeComponent({render:M,staticRenderFns:[]},undefined,O,undefined,false,undefined,!1,void 0,void 0,void 0);const z=t.defineComponent({components:{MessageBar:P,TopBar:T,SidebarNav:U},setup:()=>(t.watch(n.useRoute(),(e=>{e.matched.length&&e.matched.forEach((t=>{const i=Object.keys(t.components).filter((e=>"default"!==e));i.length&&console.warn(`named components are deprecated, use "default" instead of "${i.join(", ")}" on route ${e.name}`)}))}),{immediate:!0}),{activeApp:i.useActiveApp()}),data:()=>({windowWidth:0}),computed:{...t.mapGetters(["apps","activeMessages","activeNotifications","capabilities","configuration","getExtensionsWithNavItems","getNavItemsByExtension"]),isIE11:()=>!!window.MSInputMethodContext&&!!document.documentMode,ieDeprecationWarning(){return this.$gettext("Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.")},isSidebarVisible(){return this.sidebarNavItems.length&&this.windowWidth>=640},sidebarNavItems(){if(this.publicPage())return[];const e=this.getNavItemsByExtension(this.activeApp);if(!e)return[];const{href:t}=this.$router.resolve(this.$route);return e.map((e=>{const{href:i}=this.$router.resolve(e.route),a="function"==typeof e.name?e.name(this.capabilities):e.name;return{...e,name:this.$gettext(a),active:t.startsWith(i)}}))},applicationsList(){const e=[];return this.getExtensionsWithNavItems.forEach((t=>{e.push({...this.apps[t],type:"extension"})})),this.configuration.applications.forEach((t=>{e.push({...t,type:"link"})})),e}},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize),this.onResize()}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{...t.mapActions(["deleteMessage"]),onResize(){this.windowWidth=window.innerWidth}}});var q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"web-content"}},[i("div",{attrs:{id:"web-content-header"}},[e.isIE11?i("div",{staticClass:"oc-background-muted oc-text-center oc-py-m"},[i("p",{staticClass:"oc-m-rm",domProps:{textContent:e._s(e.ieDeprecationWarning)}})]):e._e(),e._v(" "),i("top-bar",{attrs:{"applications-list":e.applicationsList,"active-notifications":e.activeNotifications}})],1),e._v(" "),i("div",{staticClass:"oc-px-s oc-pb-s",attrs:{id:"web-content-main"}},[i("message-bar",{attrs:{"active-messages":e.activeMessages},on:{deleteMessage:e.deleteMessage}}),e._v(" "),i("div",{staticClass:"app-container oc-flex"},[e.isSidebarVisible?i("sidebar-nav",{staticClass:"app-navigation",attrs:{"nav-items":e.sidebarNavItems}}):e._e(),e._v(" "),e._l(["default","app","fullscreen"],(function(e){return i("router-view",{key:"router-view-"+e,staticClass:"app-content oc-width-1-1",attrs:{name:e}})}))],2)],1)])};q._withStripped=!0;const V=t.normalizeComponent({render:q,staticRenderFns:[]},undefined,z,undefined,false,undefined,!1,void 0,void 0,void 0);const B={computed:{...t.mapGetters(["configuration"])}};var j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"loading-overlay oc-flex oc-flex-middle oc-flex-center",style:{backgroundImage:"url("+e.configuration.currentTheme.loginPage.backgroundImg+")"}},[i("oc-spinner",{attrs:{size:"xlarge","aria-label":e.$gettext("Loading")}})],1)};j._withStripped=!0;const G=t.normalizeComponent({render:j,staticRenderFns:[]},undefined,B,undefined,false,undefined,!1,void 0,void 0,void 0);var W=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)};W._withStripped=!0;const H=t.normalizeComponent({render:W,staticRenderFns:[]},undefined,{},undefined,false,undefined,!1,void 0,void 0,void 0),Y=({store:e})=>{const t=e.getters.user.version;if(!t||!t.string)return;return`${t.product||"ownCloud"} ${t.string} ${t.edition}`};const K=t.defineComponent({components:{SkipTo:s},data:()=>({$_notificationsInterval:null,windowWidth:0,announcement:"",activeBlobStyle:{}}),computed:{...t.mapState(["route","user","modal","sidebar"]),...t.mapGetters(["configuration","capabilities","getSettingsValue"]),layout(){return this.user.isAuthenticated&&!this.user.userReady?G:!this.$route.name||["login","oidcCallback","oidcSilentRedirect","privateLink","publicLink","accessDenied"].includes(this.$route.name)?H:V},favicon(){return this.configuration.currentTheme.logo.favicon},selectedLanguage(){return this.getSettingsValue({extension:"ocis-accounts",bundle:"profile",setting:"language"})}},watch:{$route:{immediate:!0,handler:function(e){this.announceRouteChange(e),document.title=this.extractPageTitleFromRoute(e)}},capabilities:{immediate:!0,handler:function(e){e?.notifications&&(this.$nextTick((()=>{this.$_updateNotifications()})),this.$_notificationsInterval=setInterval((()=>{this.$_updateNotifications()}),3e4))}},selectedLanguage:{immediate:!0,handler(e){let t=this.$language.defaultLanguage;null!==e&&e.listValue.values.length>0&&(t=e.listValue.values[0].stringValue),t&&(this.$language.current=t,document.documentElement.lang=t)}}},destroyed(){this.$_notificationsInterval&&clearInterval(this.$_notificationsInterval)},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 5.4.0",Y({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e},methods:{...t.mapActions(["fetchNotifications"]),focusModal(e,t){this.focus({revert:"beforeDestroy"===t})},$_updateNotifications(){this.fetchNotifications(this.$client).catch((e=>{console.error("Error while loading notifications: ",e),clearInterval(this.$_notificationsInterval)}))},announceRouteChange(e){const t=this.extractPageTitleFromRoute(e,!1),i=this.$gettext("Navigated to %{ pageTitle }");this.announcement=this.$gettextInterpolate(i,{pageTitle:t})},extractPageTitleFromRoute(e,t=!0){const i=[e.meta.title?this.$gettext(e.meta.title):e.name];if(t&&i.push(this.configuration.currentTheme.general.name),e.params.item)if(e.name.startsWith("files-")){const t=e.params.item.split("/").filter((e=>e.length));t.length&&i.unshift(t.pop())}else i.unshift(e.params.item);return i.join(" - ")}}});var Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"web"}},[i("oc-hidden-announcer",{attrs:{announcement:e.announcement,level:"polite"}}),e._v(" "),i("skip-to",{attrs:{target:"web-content-main"}},[i("translate",[e._v("Skip to main")])],1),e._v(" "),i(e.layout,{tag:"component"}),e._v(" "),i("portal-target",{attrs:{name:"app.runtime.modal",multiple:""}}),e._v(" "),e.modal.displayed?i("oc-modal",{attrs:{variation:e.modal.variation,icon:e.modal.icon,title:e.modal.title,message:e.modal.message,"has-input":e.modal.hasInput,"input-label":e.modal.inputLabel,"input-disabled":e.modal.inputDisabled,"input-value":e.modal.inputValue,"input-selection-range":e.modal.inputSelectionRange,"input-description":e.modal.inputDescription,"input-error":e.modal.inputError,"button-cancel-text":e.modal.cancelText,"button-confirm-text":e.modal.confirmText,"button-confirm-disabled":e.modal.confirmDisabled||!!e.modal.inputError},on:{cancel:e.modal.onCancel,confirm:e.modal.onConfirm,input:e.modal.onInput,mounted:e.focusModal,beforeDestroy:e.focusModal}}):e._e()],1)};Q._withStripped=!0;const X=t.normalizeComponent({render:Q,staticRenderFns:[]},undefined,K,undefined,false,undefined,!1,void 0,void 0,void 0);const Z={name:"MissingConfigPage",computed:{...t.mapGetters(["configuration"]),backgroundImg(){return this.configuration.currentTheme.loginPage.backgroundImg},logoImg(){return this.configuration.currentTheme.logo.login},favicon(){return this.configuration.currentTheme.logo.favicon}},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 5.4.0",Y({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e}};var J=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-height-1-1",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{id:"Web"}},[i("div",{staticClass:"oc-login oc-height-viewport"},[i("div",{staticClass:"oc-login-card oc-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body"},[i("h1",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Missing or invalid config")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please check if the file config.json exists and is correct.")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Also, make sure to check the browser console for more information.")])]),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[i("translate",[e._v("For help visit our")]),e._v(" "),i("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://owncloud.dev/clients/web",target:"_blank"}},[e._v("documentation")]),e._v(" "),i("translate",[e._v("or join our")]),e._v(" "),i("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://talk.owncloud.com/channel/web",target:"_blank"}},[e._v("chat")]),e._v(".\n        ")],1)])])])])};J._withStripped=!0;const ee=t.normalizeComponent({render:J,staticRenderFns:[]},undefined,Z,undefined,false,undefined,!1,void 0,void 0,void 0);var te={state:{messages:[],notifications:{loading:!0,failed:!1,data:[]},quickActions:{}},actions:{toggleSidebar(e,t){e.commit("TOGGLE_SIDEBAR",t)},showMessage({commit:e},t){e("ENQUEUE_MESSAGE",t)},deleteMessage(e,t){e.commit("REMOVE_MESSAGE",t)},fetchNotifications:(e,t)=>(e.commit("LOADING_NOTIFICATIONS",!0),t.requests.ocs({service:"apps/notifications",action:"api/v1/notifications"}).then((t=>{"0"!==t.headers.get("Content-Length")&&t.json().then((i=>{t.ok?e.commit("UPDATE_NOTIFICATIONS",i.ocs.data):e.commit("ERROR_NOTIFICATIONS",i.ocs.meta.message),e.commit("LOADING_NOTIFICATIONS",!1)}))})).catch((t=>{e.commit("ERROR_NOTIFICATIONS",t),e.commit("LOADING_NOTIFICATIONS",!1)}))),deleteNotification(e,{client:t,notification:i}){t.requests.ocs({service:"apps/notifications",action:"api/v1/notifications/"+i,method:"DELETE"}).then((t=>{t.ok?e.commit("DELETE_NOTIFICATION",i):e.commit("ERROR_NOTIFICATIONS",t.ocs.meta.status)})).catch((t=>{e.commit("ERROR_NOTIFICATIONS",t)}))}},mutations:{ENQUEUE_MESSAGE(e,t){t.id||(t.id=Math.random().toString(36).slice(2,-1)),e.messages.push(t)},REMOVE_MESSAGE(e,t){e.messages.splice(e.messages.indexOf(t),1)},LOADING_NOTIFICATIONS(e,t){e.notifications.loading=t},ERROR_NOTIFICATIONS(e,t){e.notifications.failed=t},UPDATE_NOTIFICATIONS(e,t){e.notifications.data=t},DELETE_NOTIFICATION(e,t){const i=e.notifications.data.filter((e=>e.notification_id!==t));e.notifications.data=i},ADD_QUICK_ACTIONS(e,t){e.quickActions=Object.assign(e.quickActions,t)}},getters:{activeMessages:e=>e.messages,activeNotifications:e=>!(!e.notifications.data.length||e.notifications.failed)&&e.notifications.data}};var ie={state:{file:{path:"",edit:!1},fileEditors:[],newFileHandlers:[],fileSideBars:[],customFilesListIndicators:[],meta:{}},actions:{openFile:(e,t)=>new Promise(((i,a)=>{const n=t.filePath;e.commit("FETCH_FILE",n);const o=t.client||!1;o?o.files.getFileContents(n).then(i).catch(a):i()})),registerApp({commit:e},t){e("REGISTER_APP",t)},addFileAction({commit:e},t){e("ADD_FILE_ACTION",t)}},mutations:{REGISTER_EXTENSION(e,t){const{app:i,extension:a}=t,n={app:i,icon:a.icon,img:a.img,newTab:a.newTab||!1,routeName:a.routeName,routes:a.routes||[],extension:a.extension,mimeType:a.mimeType,handler:a.handler,canBeDefault:!1!==a.canBeDefault,config:(e.fileEditorConfigs||{})[i],...a.label&&{label:a.label}};e.fileEditors.push(n),a.newFileMenu&&(a.newFileMenu.ext=a.extension,a.newFileMenu.action=n,a.newFileMenu.routes=a.routes,e.newFileHandlers.push(a.newFileMenu))},REGISTER_APP(e,t){if(t.extensions&&t.extensions.forEach((e=>{this.commit("REGISTER_EXTENSION",{app:t.id,extension:e})})),t.fileSideBars){const i=e.fileSideBars;t.fileSideBars.forEach((e=>{i.push(e)})),e.fileSideBars=i}if(t.filesListIndicators){const i=e.customFilesListIndicators;t.filesListIndicators.forEach((e=>{i.push(e)})),e.customFilesListIndicators=i}if(!t.id)return;const i={name:t.name||t.id,id:t.id,icon:t.icon||"check_box_outline_blank",...t.iconFillType&&{iconFillType:t.iconFillType},img:t.img||null,config:(e.fileEditorConfigs||{})[t.id]};e.meta[i.id]=i},FETCH_FILE(e,t){e.file.path=t},LOAD_EXTENSION_CONFIG(e,{id:t,config:i}){const a={...e.fileEditorConfigs};a[t]=i,e.fileEditorConfigs=a}},getters:{appIds:e=>Object.keys(e.meta),apps:e=>e.meta,activeFile:e=>e.file,newFileHandlers:e=>e.newFileHandlers,fileSideBars:e=>e.fileSideBars,customFilesListIndicators:e=>e.customFilesListIndicators}};var ae={state:{state:null,server:"",auth:{clientId:"",apiUrl:"",authUrl:"",metaDataUrl:""},openIdConnect:{authority:""},themes:[],currentTheme:{general:{name:"",slogan:"",helpDeskText:"",helpDeskLink:"",helpDeskLinkText:"ownCloud Central"},logo:{topbar:"",favicon:"",login:"",notFound:""},loginPage:{autoRedirect:!0,backgroundImg:""},designTokens:{colorPalette:{}}},options:{defaultExtension:"files",homeFolder:"",disablePreviews:!1,displayResourcesLazy:!0,previewFileExtensions:[],sharingRecipientsPerPage:200}},actions:{loadConfig({commit:e},t){e("LOAD_CONFIG",t),t.external_apps&&t.external_apps.forEach((t=>{void 0!==t.config&&e("LOAD_EXTENSION_CONFIG",{id:t.id,config:t.config},{root:!0})}))},loadTheme(e,{theme:t}){e.commit("LOAD_THEME",t)},loadThemes(e,{theme:t}){e.commit("LOAD_THEMES",t)}},mutations:{LOAD_CONFIG(e,t){e.server=t.server.endsWith("/")?t.server:t.server+"/",e.auth=t.auth,e.openIdConnect=t.openIdConnect,e.uploadChunkSize=void 0===t.uploadChunkSize?1/0:t.uploadChunkSize,e.state=void 0===t.state?"working":t.state,e.applications=void 0===t.applications?[]:t.applications,void 0!==t.options&&(e.options={...e.options,...t.options}),t.corrupted&&(e.corrupted=t.corrupted)},LOAD_THEME(e,t){e.currentTheme=t},LOAD_THEMES(e,t){e.themes=t}},getters:{configuration:e=>e,previewFileExtensions:e=>{const t=e.options.previewFileExtensions;return(Array.isArray(t)?t:[]).filter(Boolean).map((e=>e.toLowerCase()))},homeFolder:(e,i)=>{if(t.isEmpty(e.options.homeFolder))return"/";const a=function(e,i){const a=/{{(.*?)}}/g,n=e.match(a);n&&n.forEach((a=>{const n=/{{substr\s([0-9]+)\s([0-9]+)\s\.(.*)}}/,o=a.match(n);if(!t.isEmpty(o)&&o.length>=4){const t=parseInt(o[1],10),n=parseInt(o[2],10),r=ne(o[3],i);return void(e=e.replace(a,r.substring(t,t+n)))}const r=/{{\.(.*)}}/,s=a.match(r);!t.isEmpty(s)&&s.length>=2&&(e=e.replace(a,ne(s[1],i)))}));return e}(e.options.homeFolder,i.user);return a.indexOf("//")>-1?"/":a},theme:e=>e.currentTheme}};function ne(e,t){return t[e.toLowerCase()]||""}const oe={name:"LoginPage",data:()=>({loading:!1,initialized:!1}),computed:{...t.mapGetters(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},$_productName(){return this.configuration.currentTheme.general.name},logoImg(){return this.configuration.currentTheme.logo.login},backgroundImg(){return this.configuration.currentTheme.loginPage.backgroundImg}},created(){this.configuration.currentTheme.loginPage.autoRedirect?this.login():this.initialized=!0},methods:{...t.mapActions(["login"])}};var re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.initialized?i("div",{staticClass:"oc-login oc-height-viewport",style:{backgroundImage:"url("+e.backgroundImg+")"}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card oc-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body"},[i("h2",{staticClass:"oc-login-card-title"},[i("translate",{attrs:{"translate-params":{productName:e.$_productName}}},[e._v("Welcome to %{productName}")])],1),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        Please click the button below to authenticate and get access to your data.\n      ")]),e._v(" "),i("oc-button",{staticClass:"oc-login-authorize-button",attrs:{id:"authenticate",size:"large",variation:"primary",appearance:"filled"},on:{click:function(t){return e.login()}}},[i("translate",[e._v("Login")])],1)],1),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[e._v("\n        "+e._s(e.configuration.currentTheme.general.slogan)+"\n      ")])])])]):e._e()};re._withStripped=!0;const se=t.normalizeComponent({render:re,staticRenderFns:[]},undefined,oe,undefined,false,undefined,!1,void 0,void 0,void 0);const ce={name:"OidcCallbackPage",data:()=>({error:!1}),computed:{...t.mapGetters(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},backgroundImg(){return this.configuration.currentTheme.loginPage.backgroundImg},logoImg(){return this.configuration.currentTheme.logo.login}},mounted(){this.$nextTick((()=>{if(this.$route.query.error)return this.error=!0,void console.warn("OAuth error: "+this.$route.query.error+" - "+this.$route.query.error_description);"/oidc-silent-redirect"===this.$route.path?this.signinSilentCallback():this.callback()}))},methods:{...t.mapActions(["callback","signinSilentCallback"])}};var le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-login oc-height-viewport",style:{backgroundImage:"url("+e.backgroundImg+")"}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card oc-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"oc-login-card-body"},[i("h2",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Authentication failed")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please contact the administrator if this error persists.")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],staticClass:"oc-login-card-body"},[i("h3",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Logging you in")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please wait, you are being redirected.")])]),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[e._v(e._s(e.configuration.currentTheme.general.slogan))])])])])};le._withStripped=!0;const ue=t.normalizeComponent({render:le,staticRenderFns:[]},undefined,ce,undefined,false,undefined,!1,void 0,void 0,void 0);const de={name:"AccessDeniedPage",computed:{...t.mapGetters(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},helpDeskText(){if(this.configuration.currentTheme.general.helpDeskText&&this.configuration.currentTheme.general.helpDeskText.en){const e=this.$language.current;return this.configuration.currentTheme.general.helpDeskText[e]?this.configuration.currentTheme.general.helpDeskText[e]:this.configuration.currentTheme.general.helpDeskText.en}return this.$gettext("Please contact your administrator if you think this message shows up in error.")},helpDeskLink(){return this.configuration.currentTheme.general.helpDeskLink?this.configuration.currentTheme.general.helpDeskLink:""},helpDeskLinkText(){return this.configuration.currentTheme.general.helpDeskLinkText?this.configuration.currentTheme.general.helpDeskLinkText:""},logoImg(){return this.configuration.currentTheme.logo.login},backgroundImg(){return this.configuration.currentTheme.loginPage.backgroundImg}},methods:{...t.mapActions(["logout"]),performLogout(e){"exitAnchor"===e.target.id&&this.logout()}}};var pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-login oc-height-viewport",style:{backgroundImage:"url("+e.backgroundImg+")"}},[i("h1",{staticClass:"oc-invisible-sr"},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",{staticClass:"oc-login-card oc-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body oc-width-large"},[i("h3",{staticClass:"oc-login-card-title"},[i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Login Error")])]),e._v(" "),i("h4",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-mb-m"},[e._v("Your user session is invalid or has expired.")]),e._v(" "),i("div",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-mb-m",on:{click:e.performLogout}},[e._v("\n        If you like to login with a different user please proceed to "),i("a",{attrs:{id:"exitAnchor"}},[e._v("exit")]),e._v(".\n      ")]),e._v(" "),i("div",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-m-rm"},[i("strong",[e._v("Attention:")]),e._v(" this will log you out from all applications you are running in\n        this browser with your current user.\n      ")])]),e._v(" "),i("div",{staticClass:"oc-login-card-footer oc-width-large"},[i("p",[e._v("\n        "+e._s(e.helpDeskText)+"\n        "),e.helpDeskLink?i("a",{attrs:{href:e.helpDeskLink},domProps:{textContent:e._s(e.helpDeskLinkText)}}):e._e()])])])])};pe._withStripped=!0;const me=t.normalizeComponent({render:pe,staticRenderFns:[]},undefined,de,undefined,false,undefined,!1,void 0,void 0,void 0);const he={name:"Personal",data:()=>({loadingGroups:!0,groups:[]}),computed:{...t.mapGetters(["user","configuration","getNavItemsByExtension","apps"]),isAccountEditingEnabled(){return!this.apps.settings},pageTitle(){return this.$gettext(this.$route.meta.title)},editUrl(){return this.isAccountEditingEnabled?this.configuration.server.replace(/\/$/,"")+"/index.php/settings/personal":null},editRoute(){const e=this.getNavItemsByExtension("settings");return e.length>0?e[0].route||{}:null},groupNames(){return this.groups.join(", ")}},mounted(){this.loadGroups()},methods:{async loadGroups(){this.groups=await this.$client.users.getUserGroups(this.user.id),this.loadingGroups=!1}}};var ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"oc-height-1-1 oc-m",attrs:{id:"account"}},[i("div",{staticClass:"oc-flex oc-flex-between oc-flex-bottom oc-width-1-1 oc-border-b oc-py"},[i("h1",{staticClass:"oc-page-title oc-m-rm",attrs:{id:"account-page-title"}},[e._v(e._s(e.pageTitle))]),e._v(" "),i("div",[e.editUrl?i("oc-button",{attrs:{variation:"primary",type:"a",href:e.editUrl,"data-testid":"account-page-edit-url-btn"}},[i("oc-icon",{attrs:{name:"edit"}}),e._v(" "),i("translate",[e._v("Edit")])],1):e.editRoute?i("oc-button",{attrs:{variation:"primary",type:"router-link",to:e.editRoute,"data-testid":"account-page-edit-route-btn"}},[i("oc-icon",{attrs:{name:"edit"}}),e._v(" "),i("translate",[e._v("Edit")])],1):e._e()],1)]),e._v(" "),i("h2",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-bold oc-text-initial oc-mb"},[e._v("Account Information")]),e._v(" "),i("dl",{staticClass:"account-page-info oc-flex oc-flex-wrap"},[i("div",{staticClass:"account-page-info-username oc-mb oc-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-normal oc-text-muted"},[e._v("Username")]),e._v(" "),i("dd",[e._v("\n        "+e._s(e.user.username||e.user.id)+"\n      ")])]),e._v(" "),e.user.username&&e.user.id?i("div",{staticClass:"account-page-info-userid"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-normal oc-text-muted"},[e._v("User ID")]),e._v(" "),i("dd",[e._v("\n        "+e._s(e.user.id)+"\n      ")])]):e._e(),e._v(" "),i("div",{staticClass:"account-page-info-displayname oc-mb oc-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-normal oc-text-muted"},[e._v("Display name")]),e._v(" "),i("dd",[e._v("\n        "+e._s(e.user.displayname)+"\n      ")])]),e._v(" "),i("div",{staticClass:"account-page-info-email oc-mb oc-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-normal oc-text-muted"},[e._v("Email")]),e._v(" "),i("dd",[e.user.email?[e._v(e._s(e.user.email))]:i("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("No email has been set up")])],2)]),e._v(" "),i("div",{staticClass:"account-page-info-groups oc-mb oc-width-1-2@s"},[i("dt",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-text-normal oc-text-muted",on:{click:e.loadGroups}},[e._v("\n        Group memberships\n      ")]),e._v(" "),i("dd",{attrs:{"data-testid":"group-names"}},[e.loadingGroups?i("oc-spinner",{attrs:{"aria-label":e.$gettext("Loading group membership information")}}):e.groupNames?i("span",[e._v(e._s(e.groupNames))]):i("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"data-testid":"group-names-empty"}},[e._v("You are not part of any group")])],1)])])])};ge._withStripped=!0;const fe=t.normalizeComponent({render:ge,staticRenderFns:[]},undefined,he,undefined,false,undefined,!1,void 0,void 0,void 0);t.Vue.use(t.VueRouter);const ve=document.querySelector("base"),be=(e=>{const i=e.match.bind(e),a=e=>[["%2F","/"],["//","/"]].reduce(((e,t)=>e.replaceAll(t[0],t[1])),e||"");return e.match=(e,n,o)=>{const r=i(e,n,o);return t.get(r,"meta.patchCleanPath",!1)?{...r,path:a(r.path),fullPath:a(r.fullPath)}:r},e})(new t.VueRouter({parseQuery:e=>t.lib.parse(e,{allowDots:!0}),stringifyQuery:e=>t.lib.stringify(e,{allowDots:!0,addQueryPrefix:!0}),...ve&&{mode:"history",base:new URL(ve.href).pathname},routes:[{path:"/login",name:"login",component:se,meta:{auth:!1,title:"Login"}},{path:"/oidc-callback",component:ue,meta:{auth:!1,title:"Oidc callback"}},{path:"/oidc-silent-redirect",component:ue,meta:{auth:!1,title:"Oidc redirect"}},{path:"/f/:fileId",name:"privateLink",redirect:"/files/ops/resolver/private-link/:fileId",meta:{title:"Private link"}},{path:"/s/:token",name:"publicLink",redirect:"/files/ops/resolver/public-link/:token",meta:{auth:!1,title:"Public link"}},{path:"/access-denied",name:"accessDenied",component:me,meta:{auth:!1,title:"Access denied"}},{path:"/account",name:"account",component:fe,meta:{title:"Account"}}]})),we=e=>{const t=!!ve,i=new URL(window.location.href.split("#")[0]);return t?i.pathname=new URL(ve.href).pathname:i.pathname.endsWith("/index.html")&&(i.pathname=i.pathname.split("/").slice(0,-1).filter(Boolean).join("/")),/\.(html?)$/i.test(e)?i.pathname=[...i.pathname.split("/"),...e.split("/")].filter(Boolean).join("/"):i[t?"pathname":"hash"]=be.resolve(e).href,i.href};be.beforeEach((function(e,i,a){const n=t.Vue.$store,o=n.getters.isAuthenticated;if(_e(be,e))if(o){const e=n.getters.urlBeforeLogin;n.dispatch("saveUrlBeforeLogin",null),e?a(e):a()}else n.dispatch("saveUrlBeforeLogin",e.fullPath),a("/login");else a()}));const _e=(e,t)=>{if(!1!==t.meta?.auth)return!0;if(!t.query||!t.query.contextRouteName)return!1;const i=e.getRoutes().find((e=>e.name===t.query.contextRouteName));return!!i&&!1!==i.meta?.auth};function ke(e){if(e){const i={userStore:new t.oidcClient_min.WebStorageStateStore({prefix:"oc_oAuth",store:sessionStorage}),redirect_uri:we("/oidc-callback.html"),response_type:"code",response_mode:"query",scope:"openid profile offline_access",monitorSession:!1,post_logout_redirect_uri:we("/"),silent_redirect_uri:we("/oidc-silent-redirect.html"),accessTokenExpiringNotificationTime:10,automaticSilentRenew:!0,filterProtocolClaims:!0,loadUserInfo:!0,logLevel:t.oidcClient_min.Log.INFO};e.openIdConnect&&e.openIdConnect.authority?Object.assign(i,e.openIdConnect):e.auth.metaDataUrl?Object.assign(i,{authority:e.auth.url,metadataUrl:e.auth.metaDataUrl,client_id:e.auth.clientId}):Object.assign(i,{authority:e.auth.url,metadata:{issuer:e.auth.url,authorization_endpoint:e.auth.authUrl,token_endpoint:e.auth.url,userinfo_endpoint:""},client_id:e.auth.clientId,response_type:"token",scope:"openid profile",loadUserInfo:!1});const a=new t.oidcClient_min.UserManager(i);return t.oidcClient_min.Log.logger=console,t.oidcClient_min.Log.level=i.logLevel,a.events.addUserSignedOut((function(){console.log("UserSignedOut：",arguments)})),{authenticate:()=>a.signinRedirect(),getToken(){const e=sessionStorage.getItem("oc_oAuth"+a._userStoreKey);if(e){const i=t.oidcClient_min.User.fromStorageString(e);if(i)return a.events.load(i,!1),i.access_token}return null},getStoredUserObject(){const e=sessionStorage.getItem("oc_oAuth"+a._userStoreKey);if(e){const i=t.oidcClient_min.User.fromStorageString(e);if(i)return a.events.load(i,!1),i}return null},isAuthenticated(){return null!==this.getToken()},createSignoutRequest:e=>new Promise(((t,i)=>{a.createSignoutRequest(e).then((e=>t(e.url))).catch((e=>i(e)))})),clearLoginState:()=>a.removeUser(),mgr:a,events:()=>a.events}}}let ye;const Ee={token:"",id:"",uuid:"",displayname:"",email:"",isAuthenticated:!1,capabilities:[],version:{},groups:[],userReady:!1,quota:null};var Se={state:Ee,actions:{cleanUpLoginState(e){""!==e.state.id&&(e.commit("SET_USER",Ee),e.commit("SET_CAPABILITIES",{capabilities:null,version:null}),e.commit("SET_USER_READY",!1),ye.clearLoginState())},async logout({dispatch:e}){const t=(t=!1)=>{e("cleanUpLoginState"),e("hideModal"),e("loadSettingsValues"),t&&be.push({name:"login"})},i=await ye.getStoredUserObject();i&&i.id_token?ye.createSignoutRequest({id_token_hint:i.id_token}).then((e=>{t(),window.open(e,"_self")})).catch((e=>{console.error(e)})):t(!0)},async initAuth(e,t={autoRedirect:!1}){const i=async(i,n,o=!0)=>{const r=e.rootState.config.server||window.location.origin,s={baseUrl:r,auth:{bearer:n},headers:{"X-Requested-With":"XMLHttpRequest"}};if(e.state.id&&(s.userInfo={id:e.state.id,"display-name":e.state.displayname,email:e.state.email}),i.init(s),o){let o;try{o=await i.login()}catch(t){return console.warn("Seems that your token is invalid. Error:",t),e.dispatch("cleanUpLoginState"),void be.push({name:"accessDenied"})}const s=await i.users.getUserGroups(o.id),c=await i.users.getUser(o.id);let l;if(e.state.capabilities.spaces?.enabled){const e=a.clientService.graphAuthenticated(r,n);l=await e.users.getMe()}let u="";o&&o.email?u=o.email:c&&c.email&&(u=c.email),e.commit("SET_USER",{id:o.id,uuid:l?.data?.id||"",username:o.username,displayname:o.displayname||o["display-name"],email:u,token:n,isAuthenticated:!0,groups:s}),"default"!==c.quota.definition&&"none"!==c.quota.definition&&e.commit("SET_QUOTA",c.quota),await e.dispatch("loadSettingsValues"),t.autoRedirect&&be.push({path:"/"}).catch((()=>{}))}else e.commit("UPDATE_TOKEN",n);await e.dispatch("loadCapabilities",{token:n}),e.commit("SET_USER_READY",!0)};if(!ye){ye=ke(e.rootState.config);const t=this._vm.$client;ye.events().addAccessTokenExpired((function(){console.log("AccessToken Expired：",arguments)})),ye.mgr.events.addAccessTokenExpiring((function(){console.log("AccessToken Expiring：",arguments)})),ye.events().addUserLoaded((e=>{console.log(`New User Loaded. access_token： ${e.access_token}, refresh_token: ${e.refresh_token}`),i(t,e.access_token,!1)})),ye.events().addUserUnloaded((()=>{console.log("user unloaded…"),e.dispatch("cleanUpLoginState"),be.push({name:"login"})})),ye.events().addSilentRenewError((t=>{console.error("Silent Renew Error：",t),e.dispatch("cleanUpLoginState"),be.push({name:"accessDenied"})}))}const n=ye.getToken();n&&await i(this._vm.$client,n)},login(e,t={provider:"oauth2"}){ye=ke(e.rootState.config),ye.authenticate(t.provider,{},{}).then((()=>{ye.isAuthenticated&&e.dispatch("initAuth")}))},callback(e){ye||(ye=ke(e.rootState.config)),ye.mgr.signinRedirectCallback().then((()=>{e.dispatch("initAuth",{autoRedirect:!0})})).catch((t=>{console.warn("error in OpenIdConnect:",t),e.dispatch("cleanUpLoginState"),be.push({name:"accessDenied"})}))},signinSilentCallback(e){ye||(ye=ke(e.rootState.config)),ye.mgr.signinSilentCallback().then((()=>{e.dispatch("initAuth")}))},async loadCapabilities({commit:e,rootState:i,state:a},{token:n,publicToken:o,user:r,password:s,overwrite:c=!1}){if(!t.isEmpty(a.capabilities)&&!c)return;const l=new URL(i.config.server||window.location.origin);l.pathname=l.pathname.replace(/\/$/,"")+"/ocs/v1.php/cloud/capabilities",l.searchParams.append("format","json");const u={"X-Requested-With":"XMLHttpRequest",...o&&{"public-token":o},...r&&s&&{Authorization:"Basic "+t.Buffer.from([r,s].join(":")).toString("base64")},...n&&{Authorization:"Bearer "+n}},d=await fetch(l.href,{headers:u}),p=await d.json();e("SET_CAPABILITIES",t.get(p,"ocs.data",{capabilities:null,version:null}))}},mutations:{SET_USER(e,t){let i;i=0===Object.keys(t.email).length?"":t.email,e.displayname=t.displayname,e.id=t.id,e.uuid=t.uuid,e.username=t.username,e.email=i,e.isAuthenticated=t.isAuthenticated,e.token=t.token,e.groups=t.groups},SET_CAPABILITIES(e,t){e.capabilities=t.capabilities,e.version=t.version},UPDATE_TOKEN(e,t){e.token=t},SET_USER_READY(e,t){e.userReady=t},SET_QUOTA(e,t){t.free=parseInt(t.free),t.relative=parseInt(t.relative),t.used=parseInt(t.used),t.total=parseInt(t.total),e.quota=t}},getters:{isAuthenticated:e=>e.isAuthenticated,isUserReady:e=>e.userReady,getToken:e=>e.token,user:e=>e,capabilities:e=>e.capabilities,quota:e=>e.quota}};var Ce={state:{urlBeforeLogin:null},actions:{saveUrlBeforeLogin({commit:e},t){e("SAVE_URL_BEFORE_LOGIN",t)}},mutations:{SAVE_URL_BEFORE_LOGIN(e,t){e.urlBeforeLogin=t}},getters:{urlBeforeLogin:e=>e.urlBeforeLogin}};var xe={state:{settingsValues:null},actions:{async loadSettingsValues({commit:e,state:t,dispatch:i}){const a=t.settingsValues;e("SET_SETTINGS_VALUES",null);try{e("SET_SETTINGS_VALUES",await this._vm.$client.settings.getSettingsValues())}catch(t){e("SET_SETTINGS_VALUES",a),i("showMessage",{title:"Failed to load settings values.",desc:t.response.statusText,status:"danger",autoClose:{enabled:!0}})}}},mutations:{SET_SETTINGS_VALUES(e,i){e.settingsValues=null===i?null:t.keyBy(i,"value.id")},SET_SETTINGS_VALUE(e,i){e.settingsValues=t.assign({},e.settingsValues,{[i.value.id]:i})}},getters:{settingsValuesLoaded:e=>null!==e.settingsValues,hasSettingsValue:(e,t)=>({settingId:e,extension:i,bundle:a,setting:n})=>null!==t.getSettingsValue({settingId:e,extension:i,bundle:a,setting:n}),getSettingsValue:(e,i)=>({settingId:a,extension:n,bundle:o,setting:r})=>{if(!i.settingsValuesLoaded)return null;if(a){const i=t.findKey(e.settingsValues,(e=>e.value.settingId===a));return t.isNil(i)?null:e.settingsValues[i].value}const s=t.findKey(e.settingsValues,(e=>t.isEqual(e.identifier,{extension:n,bundle:o,setting:r})));return t.isNil(s)?null:e.settingsValues[s].value}}};const Ie=()=>{};var Ae={state:{displayed:!1,variation:"passive",icon:"",title:"",message:"",cancelText:"",confirmText:"",confirmDisabled:!1,hasInput:!1,inputDisabled:!1,inputValue:"",inputSelectionRange:null,inputPlaceholder:"",inputLabel:"",inputError:"",onCancel:Ie,onConfirm:Ie,onInput:Ie},actions:{createModal({commit:e},t){e("CREATE_MODAL",t)},hideModal({commit:e}){e("HIDE_MODAL")},setModalInputErrorMessage({commit:e},t){e("SET_INPUT_ERROR_MESSAGE",t)},toggleModalConfirmButton({commit:e}){e("TOGGLE_MODAL_CONFIRM_BUTTON")}},mutations:{CREATE_MODAL(e,t){e.displayed=!0,e.variation=t.variation||"passive",e.icon=t.icon,e.title=t.title,e.message=t.message,e.cancelText=t.cancelText||"Cancel",e.confirmText=t.confirmText||"Confirm",e.confirmDisabled=t.confirmDisabled||!1,e.onCancel=t.onCancel,e.onConfirm=t.onConfirm,e.hasInput=t.hasInput||!1,e.inputValue=t.inputValue||null,e.inputSelectionRange=t.inputSelectionRange,e.inputDescription=t.inputDescription||null,e.inputLabel=t.inputLabel||null,e.inputError=t.inputError||null,e.inputDisabled=t.inputDisabled||!1,e.onInput=t.onInput||Ie},HIDE_MODAL(e){e.displayed=!1},SET_INPUT_ERROR_MESSAGE(e,t){e.inputError=t},TOGGLE_MODAL_CONFIRM_BUTTON(e){e.confirmDisabled=!e.confirmDisabled}}};var Te={state:{staticNavItems:{},dynamicNavItems:{},closed:!1},mutations:{SET_NAV_ITEMS_FROM_CONFIG(e,{extension:t,navItems:i}){const a=e.staticNavItems;a[t]=i,e.staticNavItems=a},ADD_NAV_ITEM(e,{extension:t,navItem:i}){const a={...e.dynamicNavItems};a[t]=a[t]||[];const n=a[t].findIndex((e=>e.route.path===i.route.path));n>=0?a[t][n]=i:a[t].push(i),e.dynamicNavItems=a},SET_CLOSED(e,t){e.closed=t}},getters:{getNavItemsByExtension:(e,t)=>i=>[...e.staticNavItems[i]||[],...e.dynamicNavItems[i]||[]].filter((e=>{if(!e.enabled)return!0;try{return e.enabled(t.capabilities||{})}catch(t){return console.error("`enabled` callback on navItem "+e.name+" threw an error",t),!1}})),getExtensionsWithNavItems:(e,t)=>[...new Set([...Object.keys(e.staticNavItems),...Object.keys(e.dynamicNavItems)])].filter((e=>t.getNavItemsByExtension(e).length>0))},actions:{openNavigation({commit:e}){e("SET_CLOSED",!1)},closeNavigation({commit:e}){e("SET_CLOSED",!0)}}};var Ne={plugins:[new t.VuexPersistence({key:"webStateInSessionStorage",storage:window.sessionStorage,reducer:e=>{const{user:t,navigation:i,router:a}=e;return{user:t,navigation:i,router:a}}}).plugin],modules:{app:te,apps:ie,user:Se,config:ae,router:Ce,settings:xe,modal:Ae,navigation:Te},strict:!1};const Le={cs:{Account:"Účet","Account Information":"Informace o účtu","Application Switcher":"Přepínač Aplikací","Authentication failed":"Ověření selhalo",documentation:"dokumentace","Download failed":"Stahování selhalo",Edit:"Upravit","File could not be located":"Soubor se nepodařilo najít","For help visit our":"Pro pomoc navštivte naše",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Pokud se chcete přihlásit jako jiný uživatel, pokračujte prosím <a id="exitAnchor">odhlášením</a>.',item:"položka","Loading folder failed…":"Načítání složky selhalo...","Log out":"Odhlásit",Login:"Přihlásit","Login Error":"Chyba přihlášení","No email has been set up":"Žádná emailová adresa nebyla nastavena",Notifications:"Oznámení","Please click the button below to authenticate and get access to your data.":"Stiskněte prosím tlačítko dole pro udělení oprávnění a zpřístupněte tak svá data.","Please contact the administrator if this error persists.":"Pokud tato chyba přetrvává, kontaktujte administrátora.","Please contact your administrator if you think this message shows up in error.":"Pokud si myslíte, že se tato zpráva zobrazuje omylem, kontaktujte svého administrátora.","Public link":"Veřejný odkaz","Welcome to %{productName}":"Vítejte v %{productName}","You are not part of any group":"Nejste členem žádné skupiny"},de:{"%{used} of %{total} used":"%{used} von %{total} benutzt","<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Achtung:</strong> Sie werden automatischen aus allen Anwendungen ausgeloggt.","Access denied":"Zugriff verweigert",Account:"Konto","Account Information":"Kontoinformationen","Account menu":"Benutzer-Menü","Also, make sure to check the browser console for more information.":"Bitte prüfen Sie auch die Browser-Konsole für weitere Informationen.","Application Switcher":"Apps-Menü","Authentication failed":"Authentifizierung fehlgeschlagen",chat:"chat","Click to switch theme":"Klicken, um das Farbschema zu wechseln","Currently used theme":"Aktuell verwendetes Farbschema","Dark mode":"Dunkler Modus","Display name":"Anzeigename",documentation:"Dokumentation","Download failed":"Fehler beim Herunterladen",Edit:"Bearbeiten",Email:"E-Mail","File could not be located":"Datei konnte nicht gefunden werden","For help visit our":"Für Hilfe besuche unsere","Group memberships":"Gruppenzugehörigkeiten",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Wenn Sie sich mit einem anderen Benutzer anmelden möchten, gehen Sie bitte zu <a id="exitAnchor">exit</a>.',"Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (aktuell verwendeter Browser) wird offiziell nicht unterstützt. Bitte verwende aus Sicherheitsgründen einen anderen Browser.",item:"Element","Light mode":"Heller Modus",Loading:"Lade ...","Loading folder failed…":"Laden des Ordners fehlgeschlagen…","Loading group membership information":"Gruppenmitgliedschafts-Information wird geladen","Log out":"Abmelden","Logging you in":"Sie werden eingeloggt",Login:"Login","Login Error":"Fehler beim Login","Main navigation":"Hauptnavigation","Missing or invalid config":"Fehlende oder falsche Konfiguration",msg:"Nachricht",n:"n",name:"Name","Navigate to %{ pageName } page":"Zur %{ pageName } Seite navigieren","Navigate to personal files page":"Zur persönlichen Ablage navigieren","Navigated to %{ pageTitle }":"Zur Seite %{ pageTitle } navigiert","No email has been set up":"Es wurde noch keine E-Mail eingerichtet",Notifications:"Benachrichtigungen","Oidc callback":"Oidc Callback","Oidc redirect":"Oidc Weiterleitung","or join our":"oder machen Sie mit bei ","ownCloud feedback survey":"ownCloud Feedbackumfrage","Personal storage (%{percentage}% used)":"Persönlicher Speicher (%{percentage}% benutzt)","Please check if the file config.json exists and is correct.":"Bitte prüfen Sie ob die config.json Konfigurationsdatei existiert und valide ist.","Please click the button below to authenticate and get access to your data.":"Klicken Sie auf die Schaltfläche unten, um sich zu authentifizieren und auf Ihre Daten zuzugreifen.","Please contact the administrator if this error persists.":"Bitte kontaktieren Sie den Administrator, wenn dieser Fehler weiterhin besteht.","Please contact your administrator if you think this message shows up in error.":"Falls diese Meldung fehlerhaft erscheint bitte die Systemverwaltung kontaktieren.","Please wait, you are being redirected.":"Bitte warten, Sie werden weitergeleitet","Private link":"Privater Link","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Gib uns Feedback: Wir würden unser Webdesign gerne verbessern und freuen uns über deine Rückmeldung. Vielen Dank! Dein ownCloud Team.","Public link":"Öffentlicher Link",route:"Verbindung","Sidebar navigation menu":"Navigation in der Seitenleiste","Skip to main":"Zum Hauptinhalt springen",this:"dies","Toggle sidebar":"Seitenleiste ein-/ausklappen","Top bar":"Kopfleiste","User ID":"Nutzer ID","User Menu":"Benutzermenü",Username:"Nutzername","Welcome to %{productName}":"Willkommen zu %{productName}","You are not part of any group":"Sie gehören keiner Gruppe an.","Your user session is invalid or has expired.":"Ihre Sitzung ist ungültig oder abgelaufen."},es:{"{{ app.title }}":"{{ app.title }}","%{used} of %{total} used":"usados %{used} de %{total} ","<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Atención:</strong> esto cerrará la sesión de todas las aplicaciones que está ejecutando en\neste navegador con el usuario actual.","Access denied":"Acceso denegado",Account:"Cuenta","Account Information":"Información de cuenta","Account menu":"Menú de la cuenta","Also, make sure to check the browser console for more information.":"También, asegúrese de revisar la consola del navegador para más información. ","Application Switcher":"Cambio de aplicación","Authentication failed":"Fallo de autenticación",chat:"chat","Click to switch theme":"Haga click aquí para cambiar tema","Currently used theme":"Tema en uso actualmente","Dark mode":"Modo nocturno","Display name":"Nombre a mostrar",documentation:"documentación","Download failed":"Descarga fallida",Edit:"Editar",Email:"Correo electrónico","File could not be located":"No se ha podido encontrar el archivo","For help visit our":"Para ayuda visite nuestra","Group memberships":"Membresía de grupo",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Si deseas entrar con un nombre de usuario distinto por favor procede a <a id="exitAnchor">salir</a>.',"Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (su navegador actual) no esta soportado oficialmente. Por razones de seguridad, por favor cambie a otro navegador.",item:"item",Loading:"Cargando","Loading folder failed…":"Falló la subida de la carpeta...","Loading group membership information":"Cargando información de membresía del grupo","Log out":"Salir","Logging you in":"Accediendo",Login:"Iniciar sesión","Login Error":"Error de inicio de sesión","Main navigation":"Navegación principal","Missing or invalid config":"Configuración faltante o inválida",msg:"msg",n:"n",name:"nombre","No email has been set up":"No se ha establecido ningún correo electrónico",Notifications:"Notificaciones","ownCloud feedback survey":"encuesta de ownCloud","Personal storage (%{percentage}% used)":"Almacenamiento personal (%{percentage}% usado)","Please check if the file config.json exists and is correct.":"Por favor revise que el archivo config.json existe y es correcto.","Please click the button below to authenticate and get access to your data.":"Pulse el botón para autenticarse y ganar acceso a sus datos.","Please contact the administrator if this error persists.":"Contacta con el administrador si el error persiste","Please contact your administrator if you think this message shows up in error.":"Póngase en contacto con su administrador si cree que este mensaje aparece por error.","Please wait, you are being redirected.":"Por favor espere. Lo estamos redireccionando.","Private link":"Enlace privado","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Denos su opinión. Queremos mejorar el diseño web y estaríamos felices de escuchar su opinión. ¡Gracias! Tu equipo de ownCloud.","Public link":"Enlace público",route:"ruta","Sidebar navigation menu":"Menu lateral de navegación","Skip to main":"Volver al inicio",this:"esto","Toggle sidebar":"Cambiar barra lateral","Top bar":"Barra superior","User ID":"ID del usuario","User Menu":"Menú del usuario",Username:"Usuario","Welcome to %{productName}":"Bienvenido a %{productName} ","You are not part of any group":"No eres parte de ningún grupo","Your user session is invalid or has expired.":"Su session es inválida o ha expirado."},fr:{"<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Attention :</strong>ceci va vous connecter sur toutes les applications qui sont actuelement ouvertes dans\n          votre nagivateur avec l'utilisateur actuel.","Access denied":"Accès refusé",Account:"Compte","Account Information":"Informations de compte","Account menu":"Menu du compte","Also, make sure to check the browser console for more information.":"Aussi, vérifiez la console de votre navigateur pour plus d'informations.","Application Switcher":" Changeur d'applications","Authentication failed":"Error d'authentification",chat:"chat","Display name":"Afficher le nom",documentation:"documentation","Download failed":"Echec de téléchargement",Edit:"Editer",Email:"Email","File could not be located":"Le fichier n'a pas été trouvé","For help visit our":"Pour de l'aide visiter notre ","Group memberships":"Membres du groupe",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Pour vous connecter avec un utilisateur différent, veuillez procéder à la <a id="exitAnchor">sortie</a>.',item:"Élément",Loading:"Chargement","Loading folder failed…":"Erreur de chargement du dossier…","Log out":"Se déconnecter",Login:"Se connecter","Login Error":"Erreur de connection","Main navigation":"Navigation principale","Missing or invalid config":"Configuration manqante ou incorrecte",msg:"msg",n:"n","Navigated to %{ pageTitle }":"Aller vers %{ pageTitle }","No email has been set up":"Pas d'adresse e-mail configurée",Notifications:"Notifications","or join our":"ou rejoigner notre","ownCloud feedback survey":"Enquête d'opinion sur ownCloud","Please check if the file config.json exists and is correct.":"S'il vous plait, vérifiez que le fichier config.json existe et qu'il est correcte","Please click the button below to authenticate and get access to your data.":"Veuillez cliquer le button ci-dessous pour vous authentifier et obtenir accès à vos données.","Please contact the administrator if this error persists.":"Veuillez contacter l'administrateur si cette erreur persiste.","Please contact your administrator if you think this message shows up in error.":"Veuillez contacter l'administrateur si vous pensez que ce message apparaît par erreur.","Private link":"Lien privé","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Donner votre retour : nous aimerions améliorer le design du site web et nous serions heureux d'avoir votre retour. Merci ! Votre équipe ownCloud.","Public link":"Lien public",route:"route","Sidebar navigation menu":"manu de navigation du panneau latéral","Skip to main":"Passer le principal",this:"ceci","User ID":"ID utilisateur","User Menu":"Menu utilisateur",Username:"Nom d'utilisateur","Welcome to %{productName}":"Bienvenue sur %{productName}","You are not part of any group":"Vous n'êtes membre d'aucun groupe","Your user session is invalid or has expired.":"Votre session utilisateur est invalide ou a expirée."},gl:{Account:"Conta","Account Information":"Información da conta","Application Switcher":"Cambiador de aplicacións","Authentication failed":"Produciuse un fallo de autenticación",documentation:"documentación","Download failed":"Produciuse un fallo na descarga",Edit:"Editar","File could not be located":"Non foi posíbel localizar o ficheiro","For help visit our":"Para obter axuda visite o noso",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Se quere iniciar sesión cun usuario diferente, proceda a <a id="exitAnchor">saír</a>.',item:"elemento",Loading:"Cargando","Loading folder failed…":"Produciuse un fallo ao cargar o cartafol…","Log out":"Saír",Login:"Acceso","Login Error":"Produciuse un erro de acceso",msg:"msx","No email has been set up":"Non se configurou ningún correo-e",Notifications:"Notificacións","Please click the button below to authenticate and get access to your data.":"Prema no botón de embaixo para autenticarse e obter acceso aos seus datos.","Please contact the administrator if this error persists.":"Póñase en contacto co seu administrador se persiste o erro.","Please contact your administrator if you think this message shows up in error.":"Póñase en contacto co seu administrador se cre que esta mensaxe aparece por erro.","Public link":"Ligazón pública",this:"este","Welcome to %{productName}":"Benvido a %{productName}","You are not part of any group":"Vostede non forma parte de ningún grupo"},it:{"Access denied":"Accesso negato",Account:"Utente","Account Information":"Informazioni utente","Account menu":"Menu utente","Authentication failed":"Autenticazione fallita",chat:"chat","Click to switch theme":"Clicca per cambiare tema","Currently used theme":"Tema in uso","Dark mode":"Modalità scura","Display name":"Mostra nome",documentation:"documentazione","Download failed":"Download fallito",Edit:"Modifica",Email:"Email","File could not be located":"File non trovato","For help visit our":"Per aiuto visita",'If you like to login with a different user please proceed to <a id="exitAnchor">exit</a>.':'Se si vuole autenticarsi con un altro utente procedere all\' <a id="exitAnchor">uscita</a>.',"Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (il suo browser corrente) non è ufficialmente supportato. Per ragioni di sicurezza si prega di cambiare browser.","Light mode":"Modalità chiara",Loading:"Caricamento","Loading folder failed…":"Caricamento della cartella fallito...","Log out":"Esci",Login:"Login","Login Error":"Errore di login","Main navigation":"Navigazione principale","Missing or invalid config":"Configurazione mancante o invalida",name:"nome","Navigate to %{ pageName } page":"Vai a pagina %{ pageName }","No email has been set up":"Non è stata impostata nessuna email",Notifications:"Notifiche","or join our":"o unisciti a","ownCloud feedback survey":"Sondaggio ownCloud","Personal storage (%{percentage}% used)":"Spazio personale (utilizzato al %{percentage}%)","Please check if the file config.json exists and is correct.":"Controlla se il file config.json esiste ed è corretto","Please click the button below to authenticate and get access to your data.":"Clicca il pulsante sotto per autenticarti e accedere ai tuoi dati","Please contact the administrator if this error persists.":"Contatta l'amministratore se l'errore persiste","Please contact your administrator if you think this message shows up in error.":"Contatta l'amministratore se pensi che questo messaggio compaia per errore","Please wait, you are being redirected.":"Reindirizzamento in corso, attendere prego.","Private link":"Link privato","Public link":"Link pubblico","User ID":"ID utente","User Menu":"Menu utente",Username:"Nome utente","You are not part of any group":"Non sei parte di alcun gruppo","Your user session is invalid or has expired.":"La tua sessione è invalida o scaduta"}},Pe=t.OdsTranslations;var $e={install(e){function i(t,i="url",a=null){return new Promise(((n,o)=>{null===a&&(a=new Headers).append("Authorization","Bearer "+e.$store.getters.getToken),a.append("X-Requested-With","XMLHttpRequest"),fetch(t,{headers:a}).then((e=>{e.ok?e.blob().then((e=>{if("base64"===i){const t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){n(t)}}else if("url"===i){const t=window.URL.createObjectURL(e);n(t)}})):o(e)})).catch((e=>{console.warn("media-source",e),o(e)}))}))}function a(e,t){e.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=");const a=t.value;e.setAttribute("data-image-source",a),i(a).then((t=>{a===e.getAttribute("data-image-source")?e.setAttribute("src",t):console.warn("image-source was updated again before image could load")})).catch((e=>{console.warn("image-source",e)}))}e.directive("image-source",{bind(e,t){a(e,t)},update(e,t){t.value!==t.oldValue&&a(e,t)}}),e.mixin({data:function(){return{mediaSourceQueue:new t._default({concurrency:2})}},methods:{mediaSource(e,t="url",a=null){return this.mediaSourceQueue.add((()=>i(e,t,a)))}}})}},Re={install(e){e.mixin({computed:{...t.mapGetters(["getToken","isAuthenticated","capabilities"]),...t.mapGetters("Files",["publicLinkPassword"]),...t.mapGetters(["configuration"]),isUrlSigningEnabled(){return this.capabilities.core&&this.capabilities.core["support-url-signing"]}},methods:{...t.mapActions("Files",["addActionToProgress","removeActionFromProgress"]),...t.mapActions(["showMessage"]),publicPage(){return!this.isAuthenticated||!1===this.$route.meta.auth},async downloadFile(e,t=null,i=null){const a=null!==t?t:this.publicPage();let n=null,o={};if(a?n=e.downloadURL:(n=null===i?`${this.$client.helpers._davPath}${e.webDavPath}`:this.$client.fileVersions.getFileVersionUrl(e.id,i),o={Authorization:"Bearer "+this.getToken}),a||!this.isUrlSigningEnabled)this.triggerDownload(n,e.name);else{try{if(200===(await fetch(n,{method:"HEAD",headers:o})).status){const t=await this.$client.signUrl(n);return void this.triggerDownload(t,e.name)}}catch(e){console.error(e)}this.showMessage({title:this.$gettext("Download failed"),desc:this.$gettext("File could not be located"),status:"danger",autoClose:{enabled:!0}})}},encodePath:i.encodePath,triggerDownload(e,t){const i=document.createElement("a");i.style.display="none",document.body.appendChild(i),i.href=e,i.setAttribute("download",t),i.click(),document.body.removeChild(i)}}})}},Fe={install(e){e.mixin({computed:{browserSupportsChunked:()=>t.isSupported},methods:{uploadChunkedFile(e,i,a){return new Promise(((n,o)=>{const r=this.$client.helpers.buildHeaders();delete r["OCS-APIREQUEST"];let s=null;e.lastModifiedDate&&(s=e.lastModifiedDate.getTime()/1e3),e.lastModified&&(s=e.lastModified/1e3);const c=new t.Upload(e,{endpoint:this.$client.files.getFileUrlV2(i),headers:r,chunkSize:a.chunkSize||1/0,removeFingerprintOnSuccess:!0,overridePatchMethod:!!a.overridePatchMethod,retryDelays:[0,3e3,5e3,1e4,2e4],metadata:{filename:e.name,filetype:e.type,size:e.size,mtime:s},onError:t=>{console.error(`Error uploading file "${e}" to "${i}"`,t),o(t)},onProgress:(e,t)=>{a.emitProgress({loaded:e,total:t})},onSuccess:()=>{n(`File ${c.file.name} was uploaded successfully`)}});return c.findPreviousUploads().then((e=>{0!==e.length&&c.resumeFromPreviousUpload(e[0])})),c.start(),c}))}}})}};const De={name:"Avatar",props:{type:{type:String,default:"div",validator:e=>e.match(/(div|span)/)},userName:{type:String,default:""},userid:{type:String,default:""},width:{type:Number,required:!1,default:42}},data:()=>({avatarSource:"",loading:!0}),computed:{...t.mapGetters(["getToken","capabilities","configuration"])},watch:{userid:function(e){this.setUser(e)}},mounted:function(){""!==this.userid?this.setUser(this.userid):this.loading=!1},methods:{setUser(e){if(this.loading=!0,this.avatarSource="",!this.capabilities.files_sharing.user.profile_picture||""===e)return void(this.loading=!1);const t=new Headers,i=(this.configuration.server||window.location.origin)+"remote.php/dav/avatars/"+e+"/128.png";t.append("Authorization","Bearer "+this.getToken),t.append("X-Requested-With","XMLHttpRequest"),fetch(i,{headers:t}).then((e=>{if(e.ok)return e.blob();if(404!==e.status)throw new Error(`Unexpected status code ${e.status}`)})).then((e=>{this.loading=!1,this.avatarSource=e?window.URL.createObjectURL(e):""})).catch((t=>{this.avatarSource="",this.loading=!1,console.error(`Error loading avatar image for user "${e}": `,t.message)}))}}};var Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.type,{tag:"component",attrs:{"aria-hidden":!0}},[e.loading?i("oc-spinner",{key:"avatar-loading",style:"width: "+e.width+"px; height: "+e.width+"px;"}):i("oc-avatar",{key:"avatar-loaded",attrs:{width:e.width,src:e.avatarSource,"user-name":e.userName}})],1)};Oe._withStripped=!0;const Me=t.normalizeComponent({render:Oe,staticRenderFns:[]},undefined,De,undefined,false,undefined,!1,void 0,void 0,void 0),Ue=[],ze="forward",qe="backward";var Ve={methods:{focus({from:e,to:t,revert:i}){const a=i?qe:ze;e&&a===ze?Ue.splice(0,Ue.length):e=document.activeElement,a===ze&&Ue.push(e),a===qe&&(t=Ue.pop()),t instanceof Element&&t.focus()}}},Be={mounted(){this.$nextTick((()=>this.$emit("mounted",this,"mounted")))},beforeDestroy(){this.$emit("beforeDestroy",this,"beforeDestroy")},updated(){this.$nextTick((()=>this.$emit("updated",this,"updated")))}},je={bind:function(e,t,i){window.event=function(a){e===a.target||e.contains(a.target)||i.context[t.expression](a)},document.body.addEventListener("click",window.event)},unbind:function(e){document.body.removeEventListener("click",window.event)}};t.Vue.use(t.Plugin),t.Vue.use(t.index),t.Vue.use(t.VueRouter),t.Vue.use(t._default$1),t.Vue.use(t.vueScrollto),t.Vue.use($e),t.Vue.use(Re),t.Vue.use(t.plugin),t.Vue.use(t.index$1,{refreshOnceOnNavigation:!0}),t.Vue.use(Fe),t.Vue.use(t._default$2),t.Vue.use(t.AsyncComputed),t.Vue.component("drag",t.vueDragDrop_common.Drag),t.Vue.component("drop",t.vueDragDrop_common.Drop),t.Vue.component("avatar-image",Me),t.Vue.mixin(Ve),t.Vue.mixin(Be),t.Vue.directive("click-outside",je),window.Vue=t.Vue;const Ge=t.lib$1.createStore(t.index.Store,{...Ne}),We={success:X,failure:ee},He=t.merge({},Le,Pe),Ye={en:"English",de:"Deutsch",es:"Español",cs:"Czech",fr:"Français",it:"Italiano",gl:"Galego"};async function Ke(e){const t=sessionStorage.getItem("dynamicClientData");if(null!==t){const e=t.client_secret_expires_at||0;if(0===e||Date.now()<1e3*e)return JSON.parse(t)}sessionStorage.removeItem("dynamicClientData");const i=await async function(e){return await fetch(e).then((e=>e.json())).catch((e=>{console.error("Error: ",e)}))}(`${e.authority}/.well-known/openid-configuration`),a=await async function(e,t){return await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).catch((e=>{console.error("Error: ",e)}))}(i.registration_endpoint,{redirect_uris:[we("/oidc-callback.html")],client_name:`ownCloud Web on ${window.location.origin}`});return sessionStorage.setItem("dynamicClientData",JSON.stringify(a)),a}const Qe=({applicationName:e,applicationId:a,store:n,router:o,translations:r,supportedLanguages:s})=>{if(!e)throw new i.ApiError("applicationName can't be blank");if(!a)throw new i.ApiError("applicationId can't be blank");return{announceRoutes:e=>((e,a,n)=>{if(!t.isArray(n))throw new i.ApiError("routes can't be blank");const o=t=>t.startsWith(`${e}-`)?t:`${e}-${t}`;n.map((a=>{if(!t.isObject(a))throw new i.ApiError("route can't be blank",a);const n=t.clone(a);return n.name&&(n.name=e===n.name?n.name:o(n.name)),n.path=`/${encodeURI(e)}${n.path}`,n.children&&(n.children=n.children.map((e=>{if(!t.isObject(a))throw new i.ApiError("route children can't be blank",a,e);const n=t.clone(e);return e.name&&(n.name=o(e.name)),n}))),n})).forEach((e=>{a.addRoute(e)}))})(a,o,e),announceNavigationItems:e=>((e,a,n)=>{if(!t.isObject(n))throw new i.ApiError("navigationItems can't be blank");a.commit("SET_NAV_ITEMS_FROM_CONFIG",{extension:e,navItems:n})})(a,n,e),announceTranslations:e=>((e,a,n)=>{if(!t.isObject(a))throw new i.ApiError("translations can't be blank");Object.keys(e).forEach((e=>{a[e]&&n[e]&&Object.assign(a[e],n[e])}))})(s,r,e),announceQuickActions:e=>((e,a)=>{if(!t.isObject(a))throw new i.ApiError("quickActions can't be blank");e.commit("ADD_QUICK_ACTIONS",a)})(n,e),announceStore:a=>((e,a,n)=>{const o=t.get(n,"default",n);if(!t.isObject(o))throw new i.ApiError("store can't be blank");a.registerModule(e,o)})(e,n,a),announceExtension:e=>((e,t,i)=>{t.commit("REGISTER_EXTENSION",{app:e,extension:i})})(a,n,e),requestStore:()=>(e=>(t.isEqual("production","development")&&console.warn("requestStore // store api is deprecated, use with caution"),e))(n),requestRouter:()=>(e=>(t.isEqual("production","development")&&console.warn("requestRouter // router api is deprecated, use with caution"),e))(o),openPortal:(e,i,n,o,r)=>((e,i,a,n,o,r)=>{t.Wormhole_1.open({to:["app",a,n].filter(Boolean).join("."),from:["app",e,n,o].filter(Boolean).join("."),order:o,passengers:r.map(i.$createElement)})})(a,e,i,n,o,r)}};class Xe extends class{runtimeApi;constructor(e){this.runtimeApi=e}}{applicationScript;constructor(e,t){super(e),this.applicationScript=t}initialize(){const{routes:e,navItems:t,translations:i,quickActions:a,store:n}=this.applicationScript;return e&&this.runtimeApi.announceRoutes(e),t&&this.runtimeApi.announceNavigationItems(t),i&&this.runtimeApi.announceTranslations(i),a&&this.runtimeApi.announceQuickActions(a),n&&this.runtimeApi.announceStore(n),Promise.resolve(void 0)}ready(){const{ready:e}=this.applicationScript;return this.attachPublicApi(e),Promise.resolve(void 0)}mounted(e){const{mounted:t}=this.applicationScript;return this.attachPublicApi(t,e),Promise.resolve(void 0)}userReady(e){const{userReady:t}=this.applicationScript;return this.attachPublicApi(t,e),Promise.resolve(void 0)}attachPublicApi(e,i){t.isFunction(e)&&e({...i&&{portal:{open:(...e)=>this.runtimeApi.openPortal.apply(i,[i,...e])}},instance:i,store:this.runtimeApi.requestStore(),router:this.runtimeApi.requestRouter(),announceExtension:this.runtimeApi.announceExtension})}}const Ze=new Map,{requirejs:Je,define:et}=window;et("@vue/composition-api",(()=>t.vueCompositionAPI)),et("vuex",(()=>t.vuex)),et("luxon",(()=>t.luxon));const tt=async({applicationPath:e,store:a,router:n,translations:o,supportedLanguages:r})=>{if(Ze.has(e))throw new i.RuntimeError("application already announced",e);const s=await new Promise(((t,i)=>Je([e],(e=>t(e)),(e=>i(e))))).catch((t=>{throw console.error(t),new i.RuntimeError("cannot load application",e)}));let c;try{if(!t.isObject(s.appInfo))throw new i.RuntimeError("next applications not implemented yet, stay tuned");c=await(async({applicationScript:e,store:a,router:n,translations:o,supportedLanguages:r})=>{const{appInfo:s}=e;if(!t.isObject(s))throw new i.RuntimeError("appInfo can't be blank");const{id:c,name:l}=s;if(!c)throw new i.RuntimeError("appInfo.id can't be blank");if(!l)throw new i.RuntimeError("appInfo.name can't be blank");const u=Qe({applicationName:l,applicationId:c,store:a,router:n,translations:o,supportedLanguages:r});return await a.dispatch("registerApp",e.appInfo),new Xe(u,e)})({applicationScript:s,store:a,router:n,translations:o,supportedLanguages:r}).catch()}catch(t){throw new i.RuntimeError("cannot create application",t.message,e)}return Ze.set(e,c),c},it=e=>{const t=[{name:"preview",oldName:"media-viewer"},{name:"text-editor",oldName:"markdown-editor"}];return{...e,apps:e.apps.map((e=>{const i=t.find((t=>t.oldName===e));return i?(console.warn(`app "${i.oldName}" has been renamed, use "${i.name}" instead.`),i.name):e}))}},at=async({store:e,vue:a,designSystem:n,runtimeConfiguration:o})=>{const{theme:r}=await(async(e="")=>{const i={theme:t.defaultTheme};if("json"!==e.split(".").pop())return t.isEqual("production","development")&&console.info(`Theme '${e}' does not specify a json file, using default theme.`),i;try{const t=await fetch(e);return t.ok?{theme:await t.json()}:i}catch(t){return console.error(`Failed to load theme '${e}' is not a valid json file, using default theme.`),i}})(o?.theme);await e.dispatch("loadThemes",{theme:r});const s=i.useLocalStorage("oc_currentThemeName",null);null===t.unref(s)&&(s.value=S()),await e.dispatch("loadTheme",{theme:r[t.unref(s)]||r.default}),a.use(n,{tokens:e.getters.theme.designTokens})},nt=({vue:e,supportedLanguages:i,translations:a})=>{e.use(t.getTextPlugin,{availableLanguages:i,defaultLanguage:navigator.language.substring(0,2),translations:a,silent:!0})},ot=({store:e})=>{["ownCloud Web UI 5.4.0",Y({store:e})].filter(Boolean).forEach((e=>{console.log(`%c ${e} `,"background-color: #041E42; color: #FFFFFF; font-weight: bold; border: 1px solid #FFFFFF; padding: 5px;")}))};e.bootstrap=async e=>{const i=await(async e=>{const t=await fetch(e);if(200!==t.status)throw new Error(`config could not be loaded. HTTP status-code ${t.status}`);return t.json().catch((e=>{throw new Error(`config could not be parsed. ${e}`)}))})(e);(({vue:e,runtimeConfiguration:i})=>{const n=new t.OwnCloud;n.init({baseUrl:i.server||window.location.origin}),e.prototype.$client=n,e.prototype.$clientService=a.clientService,e.prototype.$clientService.owncloudSdk=n})({vue:t.Vue,runtimeConfiguration:i}),await(async e=>{const{openIdConnect:t={}}=e;if(!t.dynamic)return;const{client_id:i,client_secret:a}=await Ke(t);t.client_id=i,t.client_secret=a})(i),await(async({vue:e,runtimeConfiguration:i,store:a})=>{await a.dispatch("loadConfig",i),await a.dispatch("initAuth"),t.set(e,"$store",a)})({vue:t.Vue,store:Ge,runtimeConfiguration:i}),await(async({runtimeConfiguration:e,store:t,router:i,translations:a,supportedLanguages:n})=>{const{apps:o=[],external_apps:r=[]}=it(e),s=[...o.map((e=>`web-app-${e}`)),...r.map((e=>e.path))].filter(Boolean),c=(await Promise.allSettled(s.map((e=>tt({applicationPath:e,store:t,supportedLanguages:n,router:i,translations:a}))))).reduce(((e,t)=>("fulfilled"!==t.status?console.error(t.reason):e.push(t.value),e)),[]);await Promise.all(c.map((e=>e.initialize()))),await Promise.all(c.map((e=>e.ready())))})({runtimeConfiguration:i,store:Ge,supportedLanguages:Ye,router:be,translations:He}),nt({vue:t.Vue,supportedLanguages:Ye,translations:He}),await at({store:Ge,vue:t.Vue,designSystem:t.designSystem,runtimeConfiguration:i}),(({store:e,router:i})=>{const a=e.getters.appIds;let n=e.getters.configuration.options.defaultExtension;(!n||a.indexOf(n)<0)&&(n=a[0]);const o=e.getters.getNavItemsByExtension(n)[0]?.route;o&&i.addRoute({path:"/",redirect:()=>o}),t.sync(e,i)})({store:Ge,router:be})},e.renderFailure=async e=>{ot({store:Ge}),await nt({vue:t.Vue,supportedLanguages:Ye,translations:He}),await at({store:Ge,vue:t.Vue,designSystem:t.designSystem}),console.error(e),new t.Vue({el:"#owncloud",store:Ge,render:e=>e(We.failure)})},e.renderSuccess=()=>{ot({store:Ge});const e=Array.from(Ze.values()),i=new t.Vue({el:"#owncloud",store:Ge,router:be,render:e=>e(We.success)});i.$once("mounted",(()=>{e.forEach((e=>e.mounted(i)))})),Ge.watch(((e,t)=>t.isUserReady),((t,a)=>{t&&t!==a&&e.forEach((e=>e.userReady(i)))}),{immediate:!0})},Object.defineProperty(e,"__esModule",{value:!0})}));
